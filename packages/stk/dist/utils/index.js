import*as e from"classix";import*as t from"rfdc";import*as n from"fast-equals";import*as o from"react";var r={"./src/utils/SmoothScroll.js":function(e){!function(){var t,n,o,r,i,l,s,a={frameRate:150,animationTime:400,stepSize:100,pulseAlgorithm:!0,pulseScale:4,pulseNormalize:1,accelerationDelta:50,accelerationMax:3,keyboardSupport:!0,arrowScroll:50,fixedBackground:!0,excluded:""},c=!1,h={x:0,y:0},d=!1,u=document.documentElement,m=[],p=/^Mac/.test(navigator.platform);function f(){if(!d&&document.body){d=!0;var e=document.body,t=document.documentElement,n=window.innerHeight,l=e.scrollHeight;if(u=document.compatMode.indexOf("CSS")>=0?t:e,o=e,a.keyboardSupport&&R("keydown",C),top!=self)c=!0;else if(W&&l>n&&(e.offsetHeight<=n||t.offsetHeight<=n)){var s,h=document.createElement("div");if(h.style.cssText="position:absolute; z-index:-10000; top:0; left:0; right:0; height:"+u.scrollHeight+"px",document.body.appendChild(h),setTimeout(i=function(){s||(s=setTimeout(function(){h.style.height="0",h.style.height=u.scrollHeight+"px",s=null},500))},10),R("resize",i),(r=new q(i)).observe(e,{attributes:!0,childList:!0,characterData:!1}),u.offsetHeight<=n){var m=document.createElement("div");m.style.clear="both",e.appendChild(m)}}a.fixedBackground||(e.style.backgroundAttachment="scroll",t.style.backgroundAttachment="scroll")}}var w=[],g=!1,y=Date.now();function v(e,t,n){var o,r;if(o=(o=t)>0?1:-1,r=(r=n)>0?1:-1,(h.x!==o||h.y!==r)&&(h.x=o,h.y=r,w=[],y=0),1!=a.accelerationMax){var i=Date.now()-y;if(i<a.accelerationDelta){var l=(1+50/i)/2;l>1&&(l=Math.min(l,a.accelerationMax),t*=l,n*=l)}y=Date.now()}if(w.push({x:t,y:n,lastX:t<0?.99:-.99,lastY:n<0?.99:-.99,start:Date.now()}),!g){var s=e===Y()||e===document.body;null==e.$scrollBehavior&&function(e){var t=x(e);if(null==k[t]){var n=getComputedStyle(e,"")["scroll-behavior"];k[t]="smooth"==n}return k[t]}(e)&&(e.$scrollBehavior=e.style.scrollBehavior,e.style.scrollBehavior="auto");var c=function(o){for(var r=Date.now(),i=0,l=0,h=0;h<w.length;h++){var d,u=w[h],m=r-u.start,p=m>=a.animationTime,f=p?1:m/a.animationTime;a.pulseAlgorithm&&(f=(d=f)>=1?1:d<=0?0:(1==a.pulseNormalize&&(a.pulseNormalize/=F(1)),F(d)));var y=u.x*f-u.lastX|0,v=u.y*f-u.lastY|0;i+=y,l+=v,u.lastX+=y,u.lastY+=v,p&&(w.splice(h,1),h--)}s?window.scrollBy(i,l):(i&&(e.scrollLeft+=i),l&&(e.scrollTop+=l)),t||n||(w=[]),w.length?$(c,e,1e3/a.frameRate+1):(g=!1,null!=e.$scrollBehavior&&(e.style.scrollBehavior=e.$scrollBehavior,e.$scrollBehavior=null))};$(c,e,0),g=!0}}function b(e){d||f();var t=E(e);if(e.defaultPrevented||e.ctrlKey||e.shiftKey||A(o,"embed")||A(t,"embed")&&/\.pdf/i.test(t.src)||A(o,"object"))return!0;var n=-e.wheelDeltaX||e.deltaX||0,r=-e.wheelDeltaY||e.deltaY||0;p&&(e.wheelDeltaX&&O(e.wheelDeltaX,120)&&(n=-120*(e.wheelDeltaX/Math.abs(e.wheelDeltaX))),e.wheelDeltaY&&O(e.wheelDeltaY,120)&&(r=-120*(e.wheelDeltaY/Math.abs(e.wheelDeltaY)))),n||r||(r=-e.wheelDelta||0),1===e.deltaMode&&(n*=40,r*=40);var i=M(t);return i?!!function(e){if(e){m.length||(m=[e,e,e]),e=Math.abs(e),m.push(e),m.shift(),clearTimeout(l),l=setTimeout(function(){try{localStorage.SS_deltaBuffer=m.join(",")}catch(e){}},1e3);var t=e>120&&_(e),n=!_(120)&&!_(100)&&!t;return e<50||n}}(r)||void(Math.abs(n)>1.2&&(n*=a.stepSize/120),Math.abs(r)>1.2&&(r*=a.stepSize/120),v(i,n,r),e.preventDefault(),H()):!c||!K||(Object.defineProperty(e,"target",{value:window.frameElement}),parent.wheel(e))}function C(e){var t=E(e),n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&"Space"!==e.code;document.body.contains(o)||(o=document.activeElement);var r=/^(button|submit|radio|checkbox|file|color|image)$/i;if(e.defaultPrevented||/^(textarea|select|embed|object)$/i.test(t.nodeName)||A(t,"input")&&!r.test(t.type)||A(o,"video")||function(e){var t=E(e),n=!1;if(-1!=document.URL.indexOf("www.youtube.com/watch"))do if(n=t.classList&&t.classList.contains("html5-video-controls"))break;while(t=t.parentNode);return n}(e)||t.isContentEditable||n||(A(t,"button")||A(t,"input")&&r.test(t.type))&&"Space"===e.code||A(t,"input")&&"radio"==t.type&&("ArrowUp"===e.code||"ArrowDown"===e.code||"ArrowLeft"===e.code||"ArrowRight"===e.code))return!0;var i=0,l=0,s=M(o);if(!s)return!c||!K||parent.keydown(e);var h=s.clientHeight;switch(s==document.body&&(h=window.innerHeight),e.code){case"ArrowUp":l=-a.arrowScroll;break;case"ArrowDown":l=a.arrowScroll;break;case"Space":l=-(e.shiftKey?1:-1)*h*.9;break;case"PageUp":l=-(.9*h);break;case"PageDown":l=.9*h;break;case"Home":s==document.body&&document.scrollingElement&&(s=document.scrollingElement),l=-s.scrollTop;break;case"End":var d=s.scrollHeight-s.scrollTop-h;l=d>0?d+10:0;break;case"ArrowLeft":i=-a.arrowScroll;break;case"ArrowRight":i=a.arrowScroll;break;default:return!0}v(s,i,l),e.preventDefault(),H()}function S(e){o=E(e)}function E(e){return e.composedPath?e.composedPath()[0]:e.target}var x=(t=0,function(e){return e.uniqueID||(e.uniqueID=t++)}),P={},L={},k={};function H(){clearTimeout(s),s=setInterval(function(){P=L=k={}},1e3)}function T(e,t,n){for(var o=n?P:L,r=e.length;r--;)o[x(e[r])]=t;return t}function M(e){for(var t=[],n=document.body,o=u.scrollHeight;e;){var r=L[x(e)];if(r)return T(t,r);if(t.push(e),o===e.scrollHeight){var i=B(u)&&B(n)||N(u);if(c&&z(u)||!c&&i)return T(t,Y())}else if(z(e)&&N(e))return T(t,e);e=e.parentElement||e.getRootNode&&e.getRootNode().host}}function z(e){return e.clientHeight+10<e.scrollHeight}function B(e){return"hidden"!==getComputedStyle(e,"").getPropertyValue("overflow-y")}function N(e){var t=getComputedStyle(e,"").getPropertyValue("overflow-y");return"scroll"===t||"auto"===t}function R(e,t,n){window.addEventListener(e,t,n||!1)}function D(e,t,n){window.removeEventListener(e,t,n||!1)}function A(e,t){return e&&(e.nodeName||"").toLowerCase()===t.toLowerCase()}try{localStorage.SS_deltaBuffer&&(m=localStorage.SS_deltaBuffer.split(","))}catch(e){}function O(e,t){return Math.floor(e/t)==e/t}function _(e){return O(m[0],e)&&O(m[1],e)&&O(m[2],e)}var $=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e,t,n){window.setTimeout(e,n||1e3/60)},q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,Y=(n=document.scrollingElement,function(){if(!n){var e=document.createElement("div");e.style.cssText="height:10000px;width:1px;",document.body.appendChild(e);var t=document.body.scrollTop;document.documentElement.scrollTop,window.scrollBy(0,3),n=document.body.scrollTop!=t?document.body:document.documentElement,window.scrollBy(0,-3),document.body.removeChild(e)}return n});function F(e){var t,n;return(e*=a.pulseScale)<1?t=e-(1-Math.exp(-e)):(e-=1,t=(n=Math.exp(-1))+(1-Math.exp(-e))*(1-n)),t*a.pulseNormalize}var X=window.navigator.userAgent,j=/Edge/.test(X),K=/chrome/i.test(X)&&!j,V=/safari/i.test(X)&&!j,I=/mobile/i.test(X),U=/Windows NT 6.1/i.test(X)&&/rv:11/i.test(X),W=V&&(/Version\/8/i.test(X)||/Version\/9/i.test(X)),G=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){G=!0}}))}catch(e){}var J=!!G&&{passive:!1},Q="onwheel"in document.createElement("div")?"wheel":"mousewheel";function Z(e){for(var t in e)a.hasOwnProperty(t)&&(a[t]=e[t])}Q&&(K||V||U)&&!I&&(R(Q,b,J),R("mousedown",S),R("load",f)),Z.destroy=function(){r&&r.disconnect(),D(Q,b),D("mousedown",S),D("keydown",C),D("resize",i),D("load",f)},window.SmoothScrollOptions&&Z(window.SmoothScrollOptions),"function"==typeof define&&define.amd?define(function(){return Z}):e.exports=Z}()}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);let s={cx:e.default,memo:e=>(0,o.memo)(e,(e,t)=>(0,n.deepEqual)(e,t)),copy:(0,t.default)({proto:!0}),Handle:class{constructor(e){this.el=e}by(e){return this.el=e.call(this,this.el),this}get(){return this.el}}};class a{constructor(e,t,n){this.cloneHeader=null,this.lastElement=null,this.lastElementRefresh=null;let o=e.querySelector("thead");if(this.tableContainer=e,this.cloneContainer=t,this.top=n||{max:0},!o||!this.tableContainer.parentNode)throw Error("Header or parent node of sticky header table container not found!");this.tableContainerParent=this.tableContainer.parentNode,this.cloneContainerParent=this.cloneContainer.parentNode,this.header=o,this.scrollParents=this.getScrollParents(this.tableContainer),this.setup()}getScrollParents(e){let t=[],n=e.parentNode;for(;n;)n.scrollHeight>n.clientHeight&&n!==window&&t.push(n),n=n.parentNode;return t}setup(){this.setupSticky(),this.setupSizeMirroring(),this.setupClickEventMirroring(),this.setupHorizontalScrollMirroring()}destroy(){this.scrollListener&&(window.removeEventListener("scroll",this.scrollListener),this.scrollParents.forEach(e=>{e.removeEventListener("scroll",this.scrollListener)})),this.currentFrameRequest&&window.cancelAnimationFrame(this.currentFrameRequest),this.sizeListener&&window.removeEventListener("resize",this.sizeListener),this.containerScrollListener&&this.tableContainerParent.removeEventListener("click",this.containerScrollListener),this.clickListener&&this.cloneContainer.removeEventListener("click",this.clickListener),this.cloneHeader&&this.cloneContainer.removeChild(this.cloneHeader)}getScrollParent(e){let t=e.parentNode;if(!t)return document.scrollingElement||document.body;let n=t instanceof HTMLElement&&window.getComputedStyle(t).overflowY||"";return!(n.includes("hidden")||n.includes("visible"))&&t.scrollHeight>t.clientHeight?t:this.getScrollParent(t)}getAllScrollParents(){let e=[this.getScrollParent(this.tableContainer)];for(;e[e.length-1]!==document.scrollingElement&&e[e.length-1]!==document.body;)e.push(this.getScrollParent(e[e.length-1]));return e}setupClickEventMirroring(){this.clickListener=e=>{let t,n=this.cloneHeader.getBoundingClientRect(),o=e.clientX-n.x,r=e.clientY-n.y,i=this.getAllScrollParents();i.forEach(e=>e._save_scroll="scrollY"in e?e.scrollY:e.scrollTop),this.header.style.scrollMarginTop=`${this.getTop()+3}px`,this.header.scrollIntoView({behavior:"instant",block:"start"});let l=this.header.getBoundingClientRect(),s=[];do(t=document.elementFromPoint(l.x+o,l.y+r))&&!this.header.contains(t)&&(t.style.visibility="collapse",s.push(t));while(t&&!this.header.contains(t)&&s.length<10);t&&t.click&&t.click(),s.forEach(e=>e.style.removeProperty("visibility")),i.forEach(e=>e.scrollTo({behavior:"instant",top:e._save_scroll}))},this.cloneContainer.addEventListener("click",this.clickListener)}setupSticky(){this.cloneContainerParent.parentNode&&(this.cloneContainerParent.parentNode.style.position="relative");let e=()=>{this.currentFrameRequest=window.requestAnimationFrame(()=>{let e=this.tableContainer.getBoundingClientRect(),t=this.tableContainer.offsetTop,n=e.y,o=this.getBottom(),r=-n,i=this.getTop();r>-i&&null===this.cloneHeader&&(this.cloneContainerParent.style.display="none",this.cloneHeader=this.createClone()),null!==this.cloneHeader&&(r<=-i?(this.cloneContainerParent.style.display="none",this.cloneContainer.removeChild(this.cloneHeader),this.cloneHeader=null):-o<-i?(this.cloneContainerParent.style.display="block",this.cloneContainerParent.style.position="fixed",this.cloneContainerParent.style.top=`${i}px`,this.setHorizontalScrollOnClone()):(this.cloneContainerParent.style.display="block",this.cloneContainerParent.style.position="absolute",this.cloneContainerParent.style.top=`${o-n+t}px`))})};this.scrollListener=()=>e(),e(),window.addEventListener("scroll",this.scrollListener),this.scrollParents.forEach(e=>{e.addEventListener("scroll",this.scrollListener)})}setupSizeMirroring(){this.sizeListener=()=>{window.requestAnimationFrame(()=>{let e=this.header.getBoundingClientRect().width;this.cloneContainer.style.width=`${e}px`,this.cloneContainerParent.style.top=`${this.getTop()}px`,this.setHorizontalScrollOnClone()})},window.addEventListener("resize",this.sizeListener)}setupHorizontalScrollMirroring(){this.containerScrollListener=()=>{window.requestAnimationFrame(()=>{this.setHorizontalScrollOnClone()})},this.tableContainerParent.addEventListener("scroll",this.containerScrollListener)}createClone(){let e=this.header.cloneNode(!0);this.cloneContainer.append(e);let t=this.header.getBoundingClientRect().width;return Array.from(this.header.children).forEach((n,o)=>{Array.from(n.children).forEach((n,r)=>{e.children[o].children[r].style.width=n.getBoundingClientRect().width/t*100+"%"})}),this.cloneContainer.style.display="table",this.cloneContainer.style.width=`${t}px`,this.cloneContainerParent.style.position="fixed",this.cloneContainerParent.style.overflow="hidden",this.cloneContainerParent.style.top=`${this.getTop()}px`,this.setHorizontalScrollOnClone(),e}setHorizontalScrollOnClone(){this.cloneContainerParent.style.width=`${this.tableContainerParent.getBoundingClientRect().width}px`,this.cloneContainerParent.scrollLeft=this.tableContainerParent.scrollLeft}sizeToPx(e){if("number"==typeof e)return e;if(!e.match(/rem$/))return console.error("Unsupported size format for sticky table header displacement."),0;{let t=+e.replace(/rem$/,"");return Number.parseFloat(window.getComputedStyle(document.getElementsByTagName("html")[0]).fontSize)*t}}getTop(){let e=document.body.getBoundingClientRect().width,t=Object.entries(this.top).filter(([e])=>"max"!==e).sort(([e],[t])=>Number.parseInt(e,10)-Number.parseInt(t,10));for(let n=0,o;o=t[n++];)if(e<Number.parseInt(o[0],10))return this.sizeToPx(o[1]);return Math.max(this.sizeToPx(this.top.max),...this.scrollParents.map(e=>e.getBoundingClientRect().top))}getBottom(){let e=this.tableContainer.getBoundingClientRect(),t=this.getLastElement(),n=this.header.getBoundingClientRect().height;return Math.min((t?t.getBoundingClientRect().y:e.y+e.height)-n,...this.scrollParents.map(e=>e.getBoundingClientRect().bottom-2*n),Number.MAX_VALUE)}getLastElement(){return this.lastElement?(this.lastElementRefresh&&clearTimeout(this.lastElementRefresh),this.lastElementRefresh=setTimeout(()=>this.lastElement,2e3)):this.lastElement=this.tableContainer.querySelector(":scope > tbody:last-of-type > tr:last-child"),this.lastElement}}var c=l("./src/utils/SmoothScroll.js"),h=l.n(c);let d="development"===process.env.NODE_ENV,u="production"===process.env.NODE_ENV,m="undefined"==typeof window,p=e=>13===e.toString().length&&e>0&&e<41024448e5;var f=h();export{s as $,a as StickyTableHeader,p as isMillisecondTimestamp,d as is_dev,u as is_prod,m as is_server,f as SmoothScroll};