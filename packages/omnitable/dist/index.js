import*as e from"react/jsx-runtime";import"@phosphor-icons/web/regular";import*as o from"ahooks";import*as l from"antd";import*as r from"appframe/components";import*as s from"lodash-es";import*as i from"lucide-react";import*as t from"mobx-react-lite";import*as a from"react";import*as n from"stk/utils";import*as d from"@phosphor-icons/react";import*as c from"stk/react";import*as m from"@dnd-kit/core";import*as u from"@dnd-kit/sortable";import*as p from"@dnd-kit/utilities";import*as _ from"dayjs";import*as h from"await-to-js";import*as b from"mobx";import*as g from"ofetch";import*as f from"stk/storage";import*as x from"mustache";import*as v from"recharts";import"highlight.js/styles/atom-one-dark.min.css";import*as j from"highlight.js/lib/languages/css";import*as y from"highlight.js/lib/languages/javascript";import*as w from"highlight.js/lib/languages/typescript";import*as S from"highlight.js/lib/languages/xml";import*as k from"lowlight";import*as N from"@tiptap/extension-code-block-lowlight";import*as C from"@tiptap/extension-color";import*as T from"@tiptap/extension-highlight";import*as A from"@tiptap/extension-image";import*as $ from"@tiptap/extension-link";import*as H from"@tiptap/extension-placeholder";import*as z from"@tiptap/extension-table";import*as Z from"@tiptap/extension-table-cell";import*as M from"@tiptap/extension-table-header";import*as D from"@tiptap/extension-table-row";import*as F from"@tiptap/extension-task-item";import*as E from"@tiptap/extension-task-list";import*as I from"@tiptap/extension-text-style";import*as P from"@tiptap/extension-typography";import*as R from"@tiptap/extension-underline";import*as Q from"@tiptap/react";import*as L from"@tiptap/starter-kit";import*as W from"color";import*as q from"decimal.js";import*as B from"nanoid";import*as O from"stk/mobx";var Y={"../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/components/Highlight/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-kA660r{gap:8px;font-size:12px;line-height:1}._local-kA660r .label{font-weight:500}._local-kA660r .color_items{grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:8px;display:grid}._local-kA660r .color_items:nth-of-type(2){margin-bottom:0}._local-kA660r .color_items.color span{color:var(--color);font-weight:500}._local-kA660r .color_items.background span{background-color:var(--color)}._local-kA660r .color_items span{border:1px solid var(--border_color);border-radius:var(--radius_small);aspect-ratio:1;width:18px}._local-kA660r .color_items span.active{outline:1px solid var(--border_color)}",""]),t.locals={_local:"_local-kA660r",local:"_local-kA660r"};let a=t},"../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/components/TableActions/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-N9IwcO{width:150px;font-size:12px;line-height:1}._local-N9IwcO .action_items .divider{background-color:var(--color_border);width:100%;height:1px;margin:6px 0}._local-N9IwcO .action_items .action_item{padding:6px 0;transition:padding .18s}._local-N9IwcO .action_items .action_item:hover{border-radius:var(--radius_small);background-color:var(--color_bg_2);padding-left:6px;padding-right:6px}",""]),t.locals={_local:"_local-N9IwcO",local:"_local-N9IwcO"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,'._local-jHHm0o [contenteditable]{outline:none}._local-jHHm0o .editor_wrap{border:var(--border);border-bottom-right-radius:var(--radius);border-bottom-left-radius:var(--radius);border-top:none}._local-jHHm0o .tiptap{box-sizing:border-box;padding:0 16px}._local-jHHm0o .tiptap.resize-cursor{cursor:ew-resize;cursor:col-resize}._local-jHHm0o .divider{background-color:var(--color_border);width:1px;height:16px}._local-jHHm0o p.is-editor-empty:first-child:before{float:left;height:0;color:var(--color_text_light);content:attr(data-placeholder);pointer-events:none}._local-jHHm0o a{color:var(--color_text_sub);text-underline-offset:2px;text-decoration:underline}._local-jHHm0o a:hover{color:var(--color_blue);text-decoration:underline}._local-jHHm0o h1{font-size:1.8em}._local-jHHm0o h1,._local-jHHm0o h2,._local-jHHm0o h3,._local-jHHm0o h4,._local-jHHm0o h5,._local-jHHm0o h6{color:var(--color_text);margin-block-start:1.2em;font-weight:500}._local-jHHm0o h1,._local-jHHm0o h2{margin-block-end:.81em}._local-jHHm0o h3,._local-jHHm0o h4,._local-jHHm0o h5,._local-jHHm0o h6{margin-block-end:1em}._local-jHHm0o blockquote{box-sizing:border-box;border-left:3.6px solid var(--color_border_light);margin-block-end:var(--editor_padding_y);margin-inline-start:var(--editor_padding_x);margin-inline-end:var(--editor_padding_x);padding-left:18px;font-size:.72em;line-height:1.5}._local-jHHm0o video{border-radius:var(--radius);width:100%;max-width:100%}._local-jHHm0o img{border-radius:var(--radius_small);max-width:100%}._local-jHHm0o figure{margin-block-start:0;margin-block-end:var(--editor_padding_y);margin-inline:0;padding-inline-start:var(--editor_padding_x);padding-inline-end:var(--editor_padding_x)}._local-jHHm0o figure figcaption{color:var(--color_text_light);text-align:center;font-size:.72em}._local-jHHm0o code{color:#ea80fc;word-break:break-word;font-family:var(--font_mono);margin:0 3px;font-size:.78em;display:inline}._local-jHHm0o code:before{content:"`"}._local-jHHm0o code:after{content:"`"}._local-jHHm0o strong{font-weight:500}._local-jHHm0o hr{background-color:var(--color_border_light);border:none;width:100%;height:1px}._local-jHHm0o pre{border-radius:var(--radius_small);color:var(--color_bg);background:var(--color_text_sub);font-family:var(--font_mono);margin:1em 0;padding:8px 12px}._local-jHHm0o pre code{display:unset;margin:unset;color:inherit;word-break:unset;font-size:.8em}._local-jHHm0o pre code:before,._local-jHHm0o pre code:after{display:none}._local-jHHm0o .tableWrapper{margin:1em 0;overflow-x:auto}._local-jHHm0o table{table-layout:fixed;border-collapse:collapse;width:100%;overflow:hidden}._local-jHHm0o table :first-child{margin-top:0}._local-jHHm0o table td,._local-jHHm0o table th{box-sizing:border-box;border:var(--border);vertical-align:top;min-width:1em;padding:6px 8px;position:relative}._local-jHHm0o table td>*,._local-jHHm0o table th>*{margin-bottom:0}._local-jHHm0o table th{background-color:var(--color_bg_1);text-align:left;font-weight:700}._local-jHHm0o table .selectedCell:after{z-index:2;background:var(--color_bg_2);content:"";pointer-events:none;position:absolute;inset:0}._local-jHHm0o table .column-resize-handle{background-color:var(--color_text);pointer-events:none;width:3px;position:absolute;top:0;bottom:-2px;right:-1px}.Toolbar-WloxFe{z-index:100;background-color:var(--color_bg);position:sticky;top:0}.Toolbar-WloxFe .toolbar_wrap{border:var(--border);border-top-left-radius:var(--radius);border-top-right-radius:var(--radius);gap:4px;padding:6px}.Toolbar-WloxFe .btn_wrap{border-radius:var(--radius_small);background-color:unset;aspect-ratio:1;width:24px;padding:0;font-size:15px;transition:all .3s}.Toolbar-WloxFe .btn_wrap:hover,.Toolbar-WloxFe .btn_wrap.active{background-color:var(--color_bg_2)}.Toolbar-WloxFe .btn_wrap:disabled{opacity:.3;background-color:unset}',""]),t.locals={_local:"_local-jHHm0o",local:"_local-jHHm0o",Toolbar:"Toolbar-WloxFe",toolbar:"Toolbar-WloxFe"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Select/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-PhJZCb.borderless-QSRome .text_wrap{border-color:#0000}._local-PhJZCb .omni-select-disabled .custom_icon_wrap,._local-PhJZCb .omni-select-disabled img,._local-PhJZCb .omni-select-open .custom_icon_wrap,._local-PhJZCb .omni-select-open img{opacity:.3}._local-PhJZCb .text_wrap{border:var(--border);border-radius:var(--radius);height:26px;padding:0 7px;line-height:26px}._local-PhJZCb .text_wrap.placeholder{color:var(--color_text_light)}._local-PhJZCb .omni-select-selector .omni-select-selection-item{border-radius:var(--radius_small_0)!important}.popup-of4XOi .omni-select-item{padding:3px 9px!important}.popup-of4XOi .omni-select-item-empty{justify-content:center;display:flex!important}.popup-of4XOi .omni-select-item-empty .omni-spin{justify-content:center;align-items:center;display:flex}",""]),t.locals={_local:"_local-PhJZCb",local:"_local-PhJZCb",borderless:"borderless-QSRome",popup:"popup-of4XOi"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Timeline/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-CrGKUk{margin-top:16px;margin-bottom:4px}.tooltip-P3jqAi{border:var(--border_light);border-radius:var(--radius);background-color:var(--color_bg);box-shadow:var(--shadow);padding:8px 12px;font-size:12px}.tooltip-P3jqAi .title{margin-bottom:4px;font-weight:500}.tooltip-P3jqAi .status_items .status_item .dot{border-radius:var(--radius_small_1);background-color:var(--item_color);width:9px;height:9px;margin-right:8px}.tooltip-P3jqAi .status_items .status_item .label{width:60px;color:var(--color_text_grey)}.tooltip-P3jqAi .status_items .status_item .code{width:30px;color:var(--color_text_light)}.tooltip-P3jqAi .status_items .status_item .count{text-align:right}",""]),t.locals={_local:"_local-CrGKUk",local:"_local-CrGKUk",tooltip:"tooltip-P3jqAi"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/TimelineControls/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-W95SP2{border:var(--border);border-radius:var(--radius);background-color:unset;height:30px;box-shadow:none;user-select:none;outline:none;gap:6px;padding:0 6px;line-height:1;transition:all .3s}._local-W95SP2:hover{border-color:var(--color_text)}._local-W95SP2 .btn_wrap{border-radius:var(--radius_small);width:18px;height:18px;font-size:16px}._local-W95SP2 .btn_wrap:hover{background-color:var(--color_bg_2)}._local-W95SP2 .type_wrap .omni-select-selector{border:none!important;padding:0!important}._local-W95SP2 .type_wrap .omni-select-selector .omni-select-selection-item{font-weight:500}._local-W95SP2 .timestamp_wrap{border-left:var(--border);color:var(--color_text_light);padding-left:12px;font-size:12px}._local-W95SP2 .btn_reset{color:var(--color_text_light)}._local-W95SP2 .btn_reset:hover{color:var(--color_text)}._local-W95SP2 .timeline_loading_wrap{z-index:10;width:18px;height:18px;backdrop-filter:var(--blur);border-radius:50%;right:6px}",""]),t.locals={_local:"_local-W95SP2",local:"_local-W95SP2"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/View/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,".empty-qozbHn svg{color:var(--color_text_softlight);font-size:60px}._local-CZ5HRx .view_item_wrap{border:var(--border);border-radius:var(--radius);margin-bottom:16px;padding:0 16px}._local-CZ5HRx .view_item_wrap:first-child{padding-top:0}._local-CZ5HRx .view_item_wrap .view_option{border-bottom:var(--border);padding:16px 0}._local-CZ5HRx .view_item_wrap .view_option:last-child{border-bottom:none}._local-CZ5HRx .view_item_wrap .view_option.name_wrap .view_name{padding:0;font-size:16px;font-weight:500}._local-CZ5HRx .view_item_wrap .view_option.name_wrap .view_actions{gap:8px}._local-CZ5HRx .view_item_wrap .view_option.name_wrap .view_actions .btn_remove{width:30px;padding:0}._local-CZ5HRx .view_item_wrap .view_option.name_wrap .view_actions .btn_apply{padding:0 8px}",""]),t.locals={empty:"empty-qozbHn",_local:"_local-CZ5HRx",local:"_local-CZ5HRx"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Comments/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,'._local-gSY_AQ .form_items{margin-bottom:16px}._local-gSY_AQ .form_items .form_item_wrap{padding-bottom:16px;padding-left:16px}._local-gSY_AQ .form_items .form_item_wrap:first-child:after{height:calc(100% - 5px)}._local-gSY_AQ .form_items .form_item_wrap:last-child{padding-bottom:0}._local-gSY_AQ .form_items .form_item_wrap:before{background-color:var(--color_text);content:"";border-radius:50%;width:4.8px;height:4.8px;position:absolute;top:5px;left:.6px}._local-gSY_AQ .form_items .form_item_wrap:after{background-color:var(--color_border_light);content:"";width:2px;height:100%;position:absolute;bottom:0;left:2px}._local-gSY_AQ .form_items .form_item_wrap .item_header{color:var(--color_text_light);margin-bottom:8px;font-size:12px;line-height:1}._local-gSY_AQ .form_items .form_item_wrap .item_header .field_role{border-radius:unset;color:var(--color_text_light);padding:0;font-size:12px;line-height:1;width:unset!important}._local-gSY_AQ .form_items .form_item_wrap .field_text:disabled{color:var(--color_text);background-color:unset;background-color:var(--color_bg_1);border:none}',""]),t.locals={_local:"_local-gSY_AQ",local:"_local-gSY_AQ"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Date/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-b4L2tL.use_by_form-l6W2MB{border:var(--border);border-radius:var(--radius);background-color:var(--color_bg_1);height:30px;padding:0 7px;line-height:30px;display:flex}._local-b4L2tL.disabled-NOsm0l{background-color:var(--color_border_soft)}",""]),t.locals={_local:"_local-b4L2tL",local:"_local-b4L2tL",use_by_form:"use_by_form-l6W2MB",useByForm:"use_by_form-l6W2MB",disabled:"disabled-NOsm0l"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/DatePicker/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-sQpNqU.use_by_form-Xp1PWW .omni-picker{height:30px;line-height:30px}._local-sQpNqU .omni-picker{height:26px;padding:0 7px;line-height:26px}._local-sQpNqU .omni-picker .omni-picker-input{height:100%}._local-sQpNqU .omni-picker .omni-picker-input input{font-size:14px}._local-sQpNqU .text_wrap{border-radius:var(--radius);border:1px solid #0000;height:26px;padding:0 7px;line-height:26px}.popup-W7pGsh .omni-picker-body{padding:0 6px!important}.popup-W7pGsh .omni-picker-cell{padding:3px!important}.popup-W7pGsh .omni-picker-ranges{border-top:var(--border)}.popup-W7pGsh .omni-picker-ranges .omni-picker-now-btn{color:var(--color_text)}",""]),t.locals={_local:"_local-sQpNqU",local:"_local-sQpNqU",use_by_form:"use_by_form-Xp1PWW",useByForm:"use_by_form-Xp1PWW",popup:"popup-W7pGsh"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Editor/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"",""]),t.locals={};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Input/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-Vz16sK.use_by_form-jcXJEJ .omni-input{width:100%;height:30px;padding:0 7px;line-height:30px}._local-Vz16sK.disabled-a01dvh .omni-input{background-color:var(--color_border_soft)}._local-Vz16sK .omni-input{overflow-x:unset;padding:0}",""]),t.locals={_local:"_local-Vz16sK",local:"_local-Vz16sK",use_by_form:"use_by_form-jcXJEJ",useByForm:"use_by_form-jcXJEJ",disabled:"disabled-a01dvh"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/InputNumber/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-ziGjAJ.use_by_form-mpTJg9 .omni-input-number{border:var(--border);height:30px;padding:0 7px;line-height:30px;width:100%!important}._local-ziGjAJ.disabled-jBIuQi .omni-input-number{background-color:var(--color_border_soft)}._local-ziGjAJ .omni-input-number{width:unset!important}._local-ziGjAJ .omni-input-number .omni-input-number-input{padding:0}",""]),t.locals={_local:"_local-ziGjAJ",local:"_local-ziGjAJ",use_by_form:"use_by_form-mpTJg9",useByForm:"use_by_form-mpTJg9",disabled:"disabled-jBIuQi"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Operation/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-fUSNcs{width:26px;height:26px;color:var(--color_text_greylight);text-align:left;background-color:#0000;padding:0}._local-fUSNcs .btn_wrap{border-radius:var(--radius);width:26px;height:26px}._local-fUSNcs .btn_wrap:hover,._local-fUSNcs .btn_wrap:active{color:var(--color_text)}._local-fUSNcs .btn_wrap:hover{background-color:var(--color_bg_2)}._local-fUSNcs .btn_wrap:active{background-color:var(--color_border)}.dropdown-BT3HIG .omni-dropdown-menu .omni-dropdown-menu-item{min-width:108px;padding:3px 6px!important}.dropdown-BT3HIG .omni-dropdown-menu .omni-dropdown-menu-item .omni-dropdown-menu-item-icon{margin-inline-end:6px!important}",""]),t.locals={_local:"_local-fUSNcs",local:"_local-fUSNcs",dropdown:"dropdown-BT3HIG"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Priority/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,".Icon-CyleTn{--size:3px;min-width:21px}.Icon-CyleTn .priority_items{gap:2px}.Icon-CyleTn .priority_items .priority_item{width:var(--size);border-radius:calc(var(--size)/2.5);background-color:rgba(var(--color_text_rgb),.24)}.Icon-CyleTn .priority_items .priority_item:first-of-type{height:calc(var(--size)*2)}.Icon-CyleTn .priority_items .priority_item:nth-of-type(2){height:calc(var(--size)*3)}.Icon-CyleTn .priority_items .priority_item:nth-of-type(3){height:calc(var(--size)*4)}.Icon-CyleTn .priority_items .priority_item.active{background-color:rgba(var(--color_text_rgb),.66)}.Icon-CyleTn .urgent_wrap{color:#fff;background-color:var(--color_warning);border-radius:3px;width:14px;height:14px;font-size:12px}",""]),t.locals={Icon:"Icon-CyleTn",icon:"Icon-CyleTn"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/RangePicker/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-nXY3rz.use_by_form-txyxGZ .omni-picker{height:30px;line-height:30px}._local-nXY3rz .omni-picker{height:26px;padding:0 7px;line-height:26px}._local-nXY3rz .omni-picker .omni-picker-input{height:100%}._local-nXY3rz .omni-picker .omni-picker-input input{font-size:14px}._local-nXY3rz .text_wrap{border-radius:var(--radius);border:1px solid #0000;height:26px;padding:0 7px;line-height:26px}.popup-_0hLvQ .omni-picker-body{padding:0 6px!important}.popup-_0hLvQ .omni-picker-cell{padding:3px!important}.popup-_0hLvQ .omni-picker-ranges{border-top:var(--border)}.popup-_0hLvQ .omni-picker-ranges .omni-picker-now-btn{color:var(--color_text)}",""]),t.locals={_local:"_local-nXY3rz",local:"_local-nXY3rz",use_by_form:"use_by_form-txyxGZ",useByForm:"use_by_form-txyxGZ",popup:"popup-_0hLvQ"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Select/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-SoHETR.borderless-nqknUd .text_wrap{border-color:#0000}._local-SoHETR .omni-select-disabled .custom_icon_wrap,._local-SoHETR .omni-select-disabled img,._local-SoHETR .omni-select-open .custom_icon_wrap,._local-SoHETR .omni-select-open img{opacity:.3}._local-SoHETR .text_wrap{border:var(--border);border-radius:var(--radius);height:26px;padding:0 7px;line-height:26px}._local-SoHETR .text_wrap.placeholder{color:var(--color_text_light)}._local-SoHETR .omni-select-selector .omni-select-selection-item{border-radius:var(--radius_small_0)!important}.popup-GEkAu4 .omni-select-item{padding:3px 9px!important}.popup-GEkAu4 .omni-select-item-empty{justify-content:center;display:flex!important}.popup-GEkAu4 .omni-select-item-empty .omni-spin{justify-content:center;align-items:center;display:flex}",""]),t.locals={_local:"_local-SoHETR",local:"_local-SoHETR",borderless:"borderless-nqknUd",popup:"popup-GEkAu4"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Tag/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-YDoRT5{vertical-align:middle}._local-YDoRT5.dot_mode-z2dnFc{justify-content:center}._local-YDoRT5.use_by_form-Z0BqQW{border:var(--border);border-radius:var(--radius);background-color:var(--color_bg_1);justify-content:left;width:100%;height:30px;padding:0 7px}._local-YDoRT5.use_by_form-Z0BqQW .option_wrap.use_bg{margin-top:unset}._local-YDoRT5 .option_wrap{color:var(--tag_color);gap:6px}._local-YDoRT5 .option_wrap.dot{justify-content:center}._local-YDoRT5 .option_wrap.dot .text{display:none}._local-YDoRT5 .option_wrap.text .dot{display:none}._local-YDoRT5 .option_wrap.use_bg{border-radius:var(--radius_small);color:#fff;background-color:var(--tag_color);justify-content:center;height:18px;margin-top:-2px;padding:0 6px;font-size:12px}._local-YDoRT5 .option_wrap.center{justify-content:center}._local-YDoRT5 .option_wrap.position_right{flex-direction:row-reverse}._local-YDoRT5 .option_wrap .dot{background-color:var(--tag_color)}._local-YDoRT5 .option_wrap .dot.circle{border-radius:50%}._local-YDoRT5 .option_wrap .dot.round{border-radius:var(--radius_small_1)}",""]),t.locals={_local:"_local-YDoRT5",local:"_local-YDoRT5",dot_mode:"dot_mode-z2dnFc",dotMode:"dot_mode-z2dnFc",use_by_form:"use_by_form-Z0BqQW",useByForm:"use_by_form-Z0BqQW"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Text/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-v3fwaN.use_by_form-rtKJCh{border:var(--border);border-radius:var(--radius);white-space:nowrap;background-color:red;height:30px;padding:0 7px;line-height:30px;display:flex;overflow:scroll}._local-v3fwaN.disabled-KLSTU0{background-color:var(--color_border_soft)}",""]),t.locals={_local:"_local-v3fwaN",local:"_local-v3fwaN",use_by_form:"use_by_form-rtKJCh",useByForm:"use_by_form-rtKJCh",disabled:"disabled-KLSTU0"};let a=t},"../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Textarea/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"._local-L7P9mM.use_by_form-bI3dkW .omni-input{border:var(--border)}._local-L7P9mM .omni-input{resize:none;white-space:wrap}._local-L7P9mM .omni-input-disabled{background-color:var(--color_border_soft)}",""]),t.locals={_local:"_local-L7P9mM",local:"_local-L7P9mM",use_by_form:"use_by_form-bI3dkW",useByForm:"use_by_form-bI3dkW"};let a=t},"../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/index.module.css":function(e,o,l){l.d(o,{Z:()=>a});var r=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js"),s=l.n(r),i=l("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js"),t=l.n(i)()(s());t.push([e.id,"@keyframes rotate-XF26up{to{rotate:360deg}}.header_wrap-WRH50A{margin-bottom:12px}.header_wrap-WRH50A .omni-popover-inner{padding:16px!important}.header_wrap-WRH50A .fields_popover .omni-popover-inner{padding:8px!important}.header_wrap-WRH50A .header_btn_wrap{border:var(--border);border-radius:var(--radius);background-color:unset;height:30px;box-shadow:none;user-select:none;outline:none;padding:0 12px;line-height:30px;transition:all .3s}.header_wrap-WRH50A .header_btn_wrap:hover{border-color:var(--color_text)}.header_wrap-WRH50A .header_btn_wrap.square{width:30px;padding:0}.header_wrap-WRH50A .header_btn_wrap.refreshing svg{animation:1.5s linear infinite rotate-XF26up}.header_wrap-WRH50A .header_btn_wrap.living{border-color:var(--color_text)}.header_wrap-WRH50A .header_btn_wrap .icon{font-size:16px}.header_wrap-WRH50A .header_btn_wrap .label{margin-left:4px;font-weight:500}.header_wrap-WRH50A .header_btn_wrap .counts{border-radius:var(--radius_small_0);background-color:var(--color_bg_1);height:16px;margin-left:6px;padding:0 4.8px;font-size:12px}.header_wrap-WRH50A .header_btn_wrap .group_fields{margin-left:6px}.header_wrap-WRH50A .header_btn_wrap .group_fields .group_field:last-child .caret{display:none}.header_wrap-WRH50A .header_btn_wrap .group_fields .group_field .counts{margin-left:0}.header_wrap-WRH50A .header_btn_wrap .group_fields .caret{margin:0 2px}.popover_wrap-zCXAfT{min-width:360px}.popover_wrap-zCXAfT.group_wrap-tQT5yy .acc_wrap .title{margin-bottom:16px}.popover_wrap-zCXAfT.group_wrap-tQT5yy .acc_wrap .omni-form-item{margin-bottom:24px}.popover_wrap-zCXAfT.group_wrap-tQT5yy .acc_wrap .omni-select-selector .omni-select-selection-item{border-radius:var(--radius_small_0)!important}.popover_wrap-zCXAfT.fields_wrap-lbScrM{min-width:unset}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field{border-radius:var(--radius);padding:2px 6px}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field:hover{background-color:var(--color_bg_1)}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field:active{background-color:var(--color_bg_2)}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field .field_left{gap:8px}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field .field_left .name{user-select:none}.popover_wrap-zCXAfT.fields_wrap-lbScrM .field .btn_drag{width:16px;height:16px;margin-left:24px}.popover_wrap-zCXAfT.has_range_picker-wn5HEX .form_list_items .form_list_item .filter_value{width:360px}.popover_wrap-zCXAfT .title{font-size:16px;font-weight:500;line-height:1}.popover_wrap-zCXAfT .desc{color:var(--color_text_greylight);margin-top:3px}.popover_wrap-zCXAfT .form_list_items{gap:8px}.popover_wrap-zCXAfT .form_list_items .form_list_item{gap:8px;margin-bottom:0}.popover_wrap-zCXAfT .form_list_items .form_list_item:first-child{margin-top:16px}.popover_wrap-zCXAfT .form_list_items .form_list_item .omni-form-item{margin-bottom:0}.popover_wrap-zCXAfT .form_list_items .form_list_item .field_name{flex:1;width:132px}.popover_wrap-zCXAfT .form_list_items .form_list_item .sort_value{min-width:96px}.popover_wrap-zCXAfT .form_list_items .form_list_item .expression_value{width:150px}.popover_wrap-zCXAfT .form_list_items .form_list_item .filter_value{width:150px}.popover_wrap-zCXAfT .form_list_items .form_list_item .btn{width:30px;padding:0;font-size:16px}.popover_wrap-zCXAfT .form_list_actions{gap:8px;margin-top:8px}.popover_wrap-zCXAfT .form_list_actions.has_items{margin-top:16px}.popover_wrap-zCXAfT .form_list_actions.has_items.filter_actions{margin-left:-80px}.popover_wrap-zCXAfT .relation_wrap{width:72px;color:var(--color_text_greylight)}.popover_wrap-zCXAfT .relation_wrap .relation_item{height:30px}._local-DZjQ5p{outline:none}._local-DZjQ5p .querying_wrap{z-index:300;border-radius:var(--radius);background-color:rgba(var(--color_bg_rgb),.81)}._local-DZjQ5p .loading_wrap{border:var(--border);border-radius:var(--radius);height:300px}._local-DZjQ5p .table_container{box-sizing:border-box;border:var(--border);border-radius:var(--radius);overflow:auto hidden}._local-DZjQ5p .table_container.clone{border-top:unset;border-right-color:#0000;border-bottom:unset;border-radius:unset;border-left-color:#0000}._local-DZjQ5p .table_wrap{border-spacing:0;border-collapse:separate}._local-DZjQ5p .table_wrap.border_style th,._local-DZjQ5p .table_wrap.border_style td{border-right:var(--border);padding:6px 8px}._local-DZjQ5p .table_wrap.border_style th:first-child,._local-DZjQ5p .table_wrap.border_style td:first-child{padding-left:8px}._local-DZjQ5p .table_wrap.border_style th:last-child,._local-DZjQ5p .table_wrap.border_style td:last-child{border-right:none;padding-left:6px}._local-DZjQ5p .table_wrap th,._local-DZjQ5p .table_wrap td{box-sizing:border-box;border-bottom:var(--border);padding:10px 8px}._local-DZjQ5p .table_wrap th:first-child,._local-DZjQ5p .table_wrap td:first-child{padding-left:12px}._local-DZjQ5p .table_wrap th:last-child,._local-DZjQ5p .table_wrap td:last-child{padding-left:12px}._local-DZjQ5p .table_wrap thead tr.selected th{border-bottom-color:var(--color_text)}._local-DZjQ5p .table_wrap thead tr th{z-index:101;background-color:var(--color_bg);text-align:left;white-space:nowrap;font-weight:500}._local-DZjQ5p .table_wrap thead tr th.sort{user-select:none}._local-DZjQ5p .table_wrap thead tr th.sort:hover{background-color:var(--color_bg_1)}._local-DZjQ5p .table_wrap thead tr th.sort:active{background-color:var(--color_bg_2)}._local-DZjQ5p .table_wrap thead tr th .table_sort{color:var(--color_text_greylight);margin-left:6px;font-size:10px;display:inline-flex}._local-DZjQ5p .table_wrap thead tr th .table_sort.order .asc,._local-DZjQ5p .table_wrap thead tr th .table_sort.order .desc{margin:0}._local-DZjQ5p .table_wrap thead tr th .table_sort .asc{margin-bottom:-2px}._local-DZjQ5p .table_wrap thead tr th .table_sort .desc{margin-top:-2px}._local-DZjQ5p .table_wrap tbody tr:last-child.selected td{border-bottom:1px solid var(--color_text)}._local-DZjQ5p .table_wrap tbody tr:last-child.selected td:first-child{border-bottom-left-radius:var(--radius)}._local-DZjQ5p .table_wrap tbody tr:last-child.selected td:last-child{border-bottom-right-radius:var(--radius)}._local-DZjQ5p .table_wrap tbody tr:last-child td{border-bottom:none}._local-DZjQ5p .table_wrap tbody tr:hover td,._local-DZjQ5p .table_wrap tbody tr.stat_row td{background-color:var(--color_bg_1)!important}._local-DZjQ5p .table_wrap tbody tr:hover.has_row_bg td,._local-DZjQ5p .table_wrap tbody tr.selected.has_row_bg td{background-color:color-mix(in srgb,var(--row_bg)7.2%,transparent)!important}._local-DZjQ5p .table_wrap tbody tr.stat_row:hover td{background-color:var(--color_bg_2)!important}._local-DZjQ5p .table_wrap tbody tr.selected td,._local-DZjQ5p .table_wrap tbody tr.selected_prev td{border-bottom-color:var(--color_text)}._local-DZjQ5p .table_wrap tbody tr.selected td:first-child{border-left:1px solid var(--color_text)}._local-DZjQ5p .table_wrap tbody tr.selected td:last-child{border-right:1px solid var(--color_text)}._local-DZjQ5p .table_wrap tbody tr.has_row_bg td{background-color:color-mix(in srgb,var(--row_bg)3%,transparent)}._local-DZjQ5p .table_wrap tbody tr td{white-space:nowrap}._local-DZjQ5p .table_wrap tbody tr td.operation{z-index:100;background-color:var(--color_bg);position:sticky;right:0}._local-DZjQ5p .table_wrap tbody tr td.sticky{z-index:100;background-color:var(--color_bg)}._local-DZjQ5p .table_wrap tbody tr td .btn_toggle_group{border-radius:var(--radius_small);width:1.2em;height:1.2em;margin-right:8px;font-size:1em;translate:0 .15em}._local-DZjQ5p .table_wrap tbody tr td .btn_toggle_group:hover{background-color:var(--color_bg_2)}._local-DZjQ5p .table_wrap tbody tr td .btn_toggle_group.visible{rotate:90deg}.Pagination-VGDTQY{padding:12px 0}.Pagination-VGDTQY .omni-pagination{align-items:center;position:relative}.Pagination-VGDTQY .omni-pagination .omni-pagination-total-text{color:var(--color_text_greylight);position:absolute;left:0}.Detail-KwoW3J{padding:18px!important}.Detail-KwoW3J .omni-form-item{margin-bottom:18px}.Detail-KwoW3J .omni-form-item-label{font-weight:500}.Detail-KwoW3J .omni-picker{height:30px;line-height:30px}.Detail-KwoW3J .actions_wrap{background-color:var(--color_bg);gap:12px;padding:9px 0}.Drawer-HDlD0E .btn_add_view{border-radius:var(--radius_small);color:#fff;background-color:var(--color_text);gap:4px;height:24px;padding:0 8px;line-height:24px;right:18px}.Drawer-HDlD0E .btn_add_view:hover{outline:3px solid var(--color_border_light)}",""]),t.locals={header_wrap:"header_wrap-WRH50A",headerWrap:"header_wrap-WRH50A",rotate:"rotate-XF26up",popover_wrap:"popover_wrap-zCXAfT",popoverWrap:"popover_wrap-zCXAfT",group_wrap:"group_wrap-tQT5yy",groupWrap:"group_wrap-tQT5yy",fields_wrap:"fields_wrap-lbScrM",fieldsWrap:"fields_wrap-lbScrM",has_range_picker:"has_range_picker-wn5HEX",hasRangePicker:"has_range_picker-wn5HEX",_local:"_local-DZjQ5p",local:"_local-DZjQ5p",Pagination:"Pagination-VGDTQY",pagination:"Pagination-VGDTQY",Detail:"Detail-KwoW3J",detail:"Detail-KwoW3J",Drawer:"Drawer-HDlD0E",drawer:"Drawer-HDlD0E"};let a=t},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/api.js":function(e){e.exports=function(e){var o=[];return o.toString=function(){return this.map(function(o){var l="",r=void 0!==o[5];return o[4]&&(l+="@supports (".concat(o[4],") {")),o[2]&&(l+="@media ".concat(o[2]," {")),r&&(l+="@layer".concat(o[5].length>0?" ".concat(o[5]):""," {")),l+=e(o),r&&(l+="}"),o[2]&&(l+="}"),o[4]&&(l+="}"),l}).join("")},o.i=function(e,l,r,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var t={};if(r)for(var a=0;a<this.length;a++){var n=this[a][0];null!=n&&(t[n]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);r&&t[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),l&&(c[2]&&(c[1]="@media ".concat(c[2]," {").concat(c[1],"}")),c[2]=l),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),o.push(c))}},o}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js":function(e){e.exports=function(e){return e[1]}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js":function(e){var o=[];function l(e){for(var l=-1,r=0;r<o.length;r++)if(o[r].identifier===e){l=r;break}return l}function r(e,r){for(var s={},i=[],t=0;t<e.length;t++){var a=e[t],n=r.base?a[0]+r.base:a[0],d=s[n]||0,c="".concat(n," ").concat(d);s[n]=d+1;var m=l(c),u={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==m)o[m].references++,o[m].updater(u);else{var p=function(e,o){var l=o.domAPI(o);return l.update(e),function(o){o?(o.css!==e.css||o.media!==e.media||o.sourceMap!==e.sourceMap||o.supports!==e.supports||o.layer!==e.layer)&&l.update(e=o):l.remove()}}(u,r);r.byIndex=t,o.splice(t,0,{identifier:c,updater:p,references:1})}i.push(c)}return i}e.exports=function(e,s){var i=r(e=e||[],s=s||{});return function(e){e=e||[];for(var t=0;t<i.length;t++){var a=l(i[t]);o[a].references--}for(var n=r(e,s),d=0;d<i.length;d++){var c=l(i[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}i=n}}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js":function(e){var o={};e.exports=function(e,l){var r=function(e){if(void 0===o[e]){var l=document.querySelector(e);if(window.HTMLIFrameElement&&l instanceof window.HTMLIFrameElement)try{l=l.contentDocument.head}catch(e){l=null}o[e]=l}return o[e]}(e);if(!r)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(l)}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js":function(e){e.exports=function(e){var o=document.createElement("style");return e.setAttributes(o,e.attributes),e.insert(o,e.options),o}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js":function(e,o,l){e.exports=function(e){var o=l.nc;o&&e.setAttribute("nonce",o)}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js":function(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var o=e.insertStyleElement(e);return{update:function(l){var r,s,i;r="",l.supports&&(r+="@supports (".concat(l.supports,") {")),l.media&&(r+="@media ".concat(l.media," {")),(s=void 0!==l.layer)&&(r+="@layer".concat(l.layer.length>0?" ".concat(l.layer):""," {")),r+=l.css,s&&(r+="}"),l.media&&(r+="}"),l.supports&&(r+="}"),(i=l.sourceMap)&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,o,e.options)},remove:function(){!function(e){if(null!==e.parentNode)e.parentNode.removeChild(e)}(o)}}}},"../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js":function(e){e.exports=function(e,o){if(o.styleSheet)o.styleSheet.cssText=e;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(e))}}}},G={};function X(e){var o=G[e];if(void 0!==o)return o.exports;var l=G[e]={id:e,exports:{}};return Y[e](l,l.exports,X),l.exports}X.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return X.d(o,{a:o}),o},X.d=(e,o)=>{for(var l in o)X.o(o,l)&&!X.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:o[l]})},X.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),X.nc=void 0;var V=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js"),U=X.n(V),J=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js"),K=X.n(J),ee=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js"),eo=X.n(ee),el=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js"),er=X.n(el),es=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js"),ei=X.n(es),et=X("../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js"),ea=X.n(et),en=X("../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/index.module.css"),ed={};ed.styleTagTransform=ea(),ed.setAttributes=er(),ed.insert=eo().bind(null,"head"),ed.domAPI=K(),ed.insertStyleElement=ei(),U()(en.Z,ed);let ec=en.Z&&en.Z.locals?en.Z.locals:void 0,em={minutes:{duration_format:"HH:mm:ss",start_format:"HH:mm:ss",end_format:"HH:mm:ss",span_value:30,span_unit:"minute"},hours:{duration_format:"MM-DD HH:mm",start_format:"MM-DD HH:mm",end_format:"HH:mm",span_value:24,span_unit:"hour"},days:{duration_format:"MM-DD HH[H]",start_format:"MM-DD HH[H]",end_format:"HH[H]",span_value:30,span_unit:"day"}},eu=[{label:"minutes",value:"minutes"},{label:"hours",value:"hours"},{label:"days",value:"days"}],ep=[12,30,60,100,300,600,1200],e_=["text","tag","date"],eh=[{label:"Asc",value:"asc"},{label:"Desc",value:"desc"}],eb=[{label:"and",value:"and"},{label:"or",value:"or"}],eg=[{label:"SUM",value:"SUM"},{label:"AVG",value:"AVG"},{label:"COUNT",value:"COUNT"},{label:"MIN",value:"MIN"},{label:"MAX",value:"MAX"}],ef={light:"var(--color_text_softlight)",dark:"var(--color_text_greylight)",success:"var(--color_success)",warning:"var(--color_warning)",danger:"var(--color_danger)"},ex=["is empty","is not empty"],ev={string:["contains","does not contain","is","is not",...ex],number:["is","is not","is less then","is less then or euqal to","is greater then","is greater then or euqal to","is between",...ex],array:["has any of","has none of",...ex],date:["is","is not","is before","is after","is on or before","is on or after","is between",...ex]},ej=(e,o)=>{switch(e){case"string":default:return"input";case"number":return"input_number";case"array":return"select";case"date":if("is between"===o)return"range_picker";return"date_picker"}},{Item:ey}=l.Form,ew=n.$.memo(o=>{let{sort_field_options:r,name:s,remove:i,...t}=o,{attributes:a,listeners:n,transform:c,transition:m,setNodeRef:_,setActivatorNodeRef:h}=(0,u.useSortable)({id:s});return(0,e.jsxs)("div",{className:"form_list_item w_100 flex",style:{transform:p.CSS.Translate.toString(c),transition:m},ref:_,...a,children:[(0,e.jsx)(ey,{...t,className:"field_name",name:[s,"field"],children:(0,e.jsx)(l.Select,{showSearch:!0,options:r})}),(0,e.jsx)(ey,{...t,className:"sort_value",name:[s,"order"],children:(0,e.jsx)(l.Select,{options:eh})}),(0,e.jsx)(l.Button,{className:"btn",onClick:()=>i(s),children:(0,e.jsx)(d.Trash,{})}),(0,e.jsx)(l.Button,{...n,className:"btn",ref:h,children:(0,e.jsx)(d.DotsSixVertical,{weight:"bold"})})]})}),{useForm:eS,List:ek}=l.Form,eN=n.$.memo(r=>{let{sort_params:s,sort_field_options:i,use_by_view:t,onChangeSort:p}=r,[_]=eS(),h=s.length,{setFieldsValue:b,getFieldsValue:g}=_,f=(0,a.useMemo)(()=>{if(i.length)return i.filter(e=>!e.disabled)[0]?.value},[i]);(0,a.useLayoutEffect)(()=>{let e={items:s},o=g();(0,c.deepEqual)(e,o)||b(e)},[s]);let x=(0,o.useMemoizedFn)(()=>p([])),v=(0,o.useMemoizedFn)(()=>{let e=g().items.filter(e=>e);if(!e.length)return x();e.every(e=>e.field&&e.order)&&p(e)}),j=(0,e.jsxs)("div",{className:n.$.cx("flex flex_column",ec.popover_wrap),children:[(0,e.jsx)("span",{className:"title",children:h?"Sort By":"No sorting applied"}),(0,e.jsx)(l.Form,{className:"flex align_center",form:_,onValuesChange:v,children:(0,e.jsx)(ek,{name:"items",children:(o,{add:r,remove:s,move:t})=>(0,e.jsxs)("div",{className:"form_list_wrap w_100 flex flex_column",children:[(0,e.jsx)("div",{className:"form_list_items w_100 flex flex_column",children:o.length?(0,e.jsx)(m.DndContext,{onDragEnd:({active:e,over:o})=>{o&&t(e.id,o.id)},children:(0,e.jsx)(u.SortableContext,{items:o.map(e=>({...e,id:e.name})),strategy:u.verticalListSortingStrategy,children:o.map(e=>(0,a.createElement)(ew,{sort_field_options:i,remove:s,...e,key:e.key}))})}):(0,e.jsx)("div",{className:"desc",children:"Add sorting to organize your rows."})}),(0,e.jsxs)("div",{className:n.$.cx("form_list_actions flex",o.length>0&&"has_items"),children:[(0,e.jsx)(l.Button,{className:"clickable",type:"primary",disabled:!f,onClick:()=>r({field:f,order:"asc"}),children:"Add sort"}),h>0&&(0,e.jsx)(l.Button,{className:"clickable",onClick:x,children:"Reset sorting"})]})]})})})]});return t?j:(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottomLeft",content:j,forceRender:!0,children:(0,e.jsx)("div",{children:(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable mr_8",children:[(0,e.jsx)(d.ArrowsDownUp,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Sort"}),h>0&&(0,e.jsx)("span",{className:"counts flex align_center",children:h})]})})})});var eC=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Comments/index.module.css"),eT={};eT.styleTagTransform=ea(),eT.setAttributes=er(),eT.insert=eo().bind(null,"head"),eT.domAPI=K(),eT.insertStyleElement=ei(),U()(eC.Z,eT);let eA=eC.Z&&eC.Z.locals?eC.Z.locals:void 0,{Item:e$,List:eH,useForm:ez}=l.Form,{TextArea:eZ}=l.Input,eM=n.$.memo(r=>{let{self_props:i,value:t=[],disabled:m,onChange:u}=r,{binds:p}=i||{},[h]=ez(),{setFieldsValue:b,getFieldsValue:g}=h;(0,a.useLayoutEffect)(()=>{let e={items:t},o=g();(0,c.deepEqual)(e,o)||b(e)},[t]);let f=(0,o.useMemoizedFn)((0,s.debounce)(u,600)),x=(0,o.useMemoizedFn)((e,o)=>{f(o.items)}),v=(0,o.useMemoizedFn)(()=>{let e={[p.date]:(0,_.default)().valueOf(),[p.text]:"",__new__:!0};p.role&&(e[p.role]="role",t.push(e)),u(n.$.copy(t))});return(0,e.jsx)(l.Form,{component:!1,disabled:m,form:h,onValuesChange:x,children:(0,e.jsx)(eH,{name:"items",children:o=>(0,e.jsxs)("div",{className:n.$.cx("form_items_wrap w_100 flex flex_column",eA._local),children:[o.length>0&&(0,e.jsx)("div",{className:"form_items flex flex_column",children:o.map(({key:o,name:r,...s})=>(0,e.jsxs)("div",{className:"form_item_wrap w_100 border_box flex flex_column relative",children:[(0,e.jsxs)("div",{className:"item_header flex justify_between align_center",children:[(0,e.jsx)("span",{className:"field_date mr_12",children:t?.[r]?.[p.date]?(0,_.default)(t[r][p.date]).format("YYYY-MM-DD HH:mm"):""}),p.role&&(0,e.jsx)(e$,{...s,name:[r,p.role],noStyle:!0,children:(0,e.jsx)(l.Input,{className:"field_role text_right",variant:"borderless",maxLength:30,disabled:!t[r].__new__})})]}),(0,e.jsx)(e$,{...s,name:[r,p.text],noStyle:!0,children:(0,e.jsx)(eZ,{className:"field_text",autoSize:{minRows:2},disabled:!t[r].__new__})})]},o))}),(0,e.jsx)(l.Button,{className:"btn_add",onClick:v,children:(0,e.jsx)(d.Plus,{})})]})})})});var eD=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Date/index.module.css"),eF={};eF.styleTagTransform=ea(),eF.setAttributes=er(),eF.insert=eo().bind(null,"head"),eF.domAPI=K(),eF.insertStyleElement=ei(),U()(eD.Z,eF);let eE=eD.Z&&eD.Z.locals?eD.Z.locals:void 0,eI=n.$.memo(o=>{let{self_props:l,value:r,use_by_form:s,disabled:i}=o,{format:t="MMMM D, YYYY"}=l||{};return(0,e.jsx)("span",{className:n.$.cx("border_box",eE._local,s&&eE.use_by_form,i&&eE.disabled),children:r?(0,_.default)(r).format(t||"YYYY-MM-DD"):"-"})});var eP=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/DatePicker/index.module.css"),eR={};eR.styleTagTransform=ea(),eR.setAttributes=er(),eR.insert=eo().bind(null,"head"),eR.domAPI=K(),eR.insertStyleElement=ei(),U()(eP.Z,eR);let eQ=eP.Z&&eP.Z.locals?eP.Z.locals:void 0,eL=n.$.memo(r=>{let{self_props:s,width:i,value:t,editing:a,use_by_form:d,onFocus:c,onChange:m}=r,{format:u="MMMM D, YYYY"}=s||{},p=(0,o.useMemoizedFn)(e=>m?.(e.valueOf()));return(0,e.jsx)("div",{className:n.$.cx("w_100 flex align_center",eQ._local,d&&eQ.use_by_form),style:{width:i},children:a?(0,e.jsx)(l.DatePicker,{...s,classNames:{popup:{root:eQ.popup}},className:"w_100",placement:"bottomLeft",suffixIcon:null,allowClear:!1,format:u,getPopupContainer:()=>document.body,value:t?(0,_.default)(t):void 0,onFocus:c,onChange:p}):(0,e.jsx)("span",{className:"text_wrap w_100 line_clamp_1 border_box inline_flex align_center",children:t?(0,_.default)(t).format(u):"-"})})});var eW=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Editor/index.module.css"),eq={};eq.styleTagTransform=ea(),eq.setAttributes=er(),eq.insert=eo().bind(null,"head"),eq.domAPI=K(),eq.insertStyleElement=ei(),U()(eW.Z,eq);let eB=eW.Z&&eW.Z.locals?eW.Z.locals:void 0,eO=n.$.memo(l=>{let{self_props:r,value:i,disabled:t,onChange:a}=l,{max_height:d}=r||{},c=(0,o.useMemoizedFn)((0,s.debounce)(a,600));return(0,e.jsx)("div",{className:n.$.cx("w_100 flex align_center",eB._local),children:(0,e.jsx)(lH,{value:i,readonly:t,max_height:d,onChange:c})})});var eY=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Input/index.module.css"),eG={};eG.styleTagTransform=ea(),eG.setAttributes=er(),eG.insert=eo().bind(null,"head"),eG.domAPI=K(),eG.insertStyleElement=ei(),U()(eY.Z,eG);let eX=eY.Z&&eY.Z.locals?eY.Z.locals:void 0,eV=n.$.memo(r=>{let{self_props:i,width:t,value:a,editing:d,use_by_form:c,disabled:m,onFocus:u,onBlur:p,onChange:_}=r,{}=i||{},h=_?(0,o.useMemoizedFn)((0,s.debounce)(_,300)):void 0;return(0,e.jsx)("div",{className:n.$.cx("w_100 flex align_center",eX._local,c&&eX.use_by_form,m&&eX.disabled),style:{width:t},children:d?(0,e.jsx)(l.Input,{...i,className:"w_100 line_clamp_1",variant:c?"outlined":"borderless",defaultValue:a,onFocus:u,onBlur:p,onChange:h}):(0,e.jsx)("span",{className:"text_wrap line_clamp_1 border_box",children:a})})});var eU=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/InputNumber/index.module.css"),eJ={};eJ.styleTagTransform=ea(),eJ.setAttributes=er(),eJ.insert=eo().bind(null,"head"),eJ.domAPI=K(),eJ.insertStyleElement=ei(),U()(eU.Z,eJ);let eK=eU.Z&&eU.Z.locals?eU.Z.locals:void 0,e0=n.$.memo(r=>{let{self_props:i,width:t,value:a,editing:d,use_by_form:c,disabled:m,onFocus:u,onBlur:p,onChange:_}=r,{}=i||{},h=_?(0,o.useMemoizedFn)((0,s.debounce)(_,300)):void 0;return(0,e.jsx)("div",{className:n.$.cx(eK._local,c&&eK.use_by_form,m&&eK.disabled),style:{width:t},children:d?(0,e.jsx)(l.InputNumber,{...i,className:"w_100",variant:c?"outlined":"borderless",defaultValue:a,onFocus:u,onBlur:p,onChange:h}):(0,e.jsx)("span",{className:"text_wrap border_box inline_flex align_center",children:a})})});var e1=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Operation/index.module.css"),e3={};e3.styleTagTransform=ea(),e3.setAttributes=er(),e3.insert=eo().bind(null,"head"),e3.domAPI=K(),e3.insertStyleElement=ei(),U()(e1.Z,e3);let e2=e1.Z&&e1.Z.locals?e1.Z.locals:void 0,e8=n.$.memo(r=>{let{self_props:s,editing:t,onFocus:c,onChange:m}=r,{no_edit:u,no_delete:p}=s||{},_=(0,a.useRef)(0),h=(0,a.useMemo)(()=>{let o=[{key:"view",label:"View",icon:(0,e.jsx)(d.Eye,{size:16})}];return u||o.push({key:"edit",label:"Edit",icon:(0,e.jsx)(d.PencilSimpleLine,{size:16})}),p||o.push({type:"divider"},{key:"delete",label:"Delete",icon:(0,e.jsx)(d.Trash,{size:16})}),o},[u,p]),b=(0,o.useMemoizedFn)(({key:e})=>{_.current++,m?.({key:e,signal:_.current})}),g=(0,e.jsx)("div",{className:"btn_wrap flex justify_center align_center clickable",children:(0,e.jsx)(i.Ellipsis,{size:16,strokeWidth:2,strokeLinecap:"round"})});return(0,e.jsx)("div",{className:"flex justify_end",children:(0,e.jsx)("button",{className:n.$.cx("flex",e2._local),onFocus:c,children:t?(0,e.jsx)(l.Dropdown,{rootClassName:e2.dropdown,trigger:["click"],destroyOnHidden:!0,getPopupContainer:()=>document.body,menu:{items:h,onClick:b,onFocus:c},children:(0,e.jsx)("div",{children:g})}):g})})});var e5=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Priority/index.module.css"),e6={};e6.styleTagTransform=ea(),e6.setAttributes=er(),e6.insert=eo().bind(null,"head"),e6.domAPI=K(),e6.insertStyleElement=ei(),U()(e5.Z,e6);let e4=e5.Z&&e5.Z.locals?e5.Z.locals:void 0,e9=n.$.memo(o=>{let{value:l}=o,r=(0,a.useMemo)(()=>0===l?(0,e.jsx)("div",{className:"priority_items flex align_end",children:Array.from({length:3}).map((o,l)=>(0,e.jsx)("span",{className:"priority_item"},l))}):l<4?(0,e.jsx)("div",{className:"priority_items flex align_end",children:Array.from({length:4}).map((o,r)=>(0,e.jsx)("span",{className:n.$.cx("priority_item",l>=r+1&&"active")},r))}):(0,e.jsx)("div",{className:"urgent_wrap flex justify_center align_center",children:(0,e.jsx)(d.ExclamationMark,{weight:"bold"})}),[l]);return(0,e.jsx)("div",{className:n.$.cx("flex custom_icon_wrap",e4.Icon),children:r})}),e7=[{label:(0,e.jsxs)("span",{className:"flex align_center",children:[(0,e.jsx)(e9,{value:0}),"No priority"]}),value:0},{label:(0,e.jsxs)("span",{className:"flex align_center",children:[(0,e.jsx)(e9,{value:4}),"Urgent"]}),value:4},{label:(0,e.jsxs)("span",{className:"flex align_center",children:[(0,e.jsx)(e9,{value:3}),"High"]}),value:3},{label:(0,e.jsxs)("span",{className:"flex align_center",children:[(0,e.jsx)(e9,{value:2}),"Medium"]}),value:2},{label:(0,e.jsxs)("span",{className:"flex align_center",children:[(0,e.jsx)(e9,{value:1}),"Low"]}),value:1}],oe=n.$.memo(o=>(0,e.jsx)(ll,{...o,self_props:{...o.self_props,options:e7}}));var oo=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/RangePicker/index.module.css"),ol={};ol.styleTagTransform=ea(),ol.setAttributes=er(),ol.insert=eo().bind(null,"head"),ol.domAPI=K(),ol.insertStyleElement=ei(),U()(oo.Z,ol);let or=oo.Z&&oo.Z.locals?oo.Z.locals:void 0,{RangePicker:os}=l.DatePicker,oi=n.$.memo(l=>{let{self_props:r,width:s,value:i,editing:t,use_by_form:a,onFocus:d,onChange:c}=l,{format:m="YYYY-MM-DD HH:mm:ss"}=r||{},u=(0,o.useMemoizedFn)(e=>c?.(e?[e[0]?.valueOf(),e[1]?.valueOf()]:[]));return(0,e.jsx)("div",{className:n.$.cx("w_100 flex align_center",or._local,a&&or.use_by_form),style:{width:s},children:t?(0,e.jsx)(os,{...r,showTime:!0,classNames:{popup:{root:or.popup}},className:"w_100",placement:"bottomLeft",suffixIcon:null,allowClear:!1,format:m,getPopupContainer:()=>document.body,value:i?[(0,_.default)(i[0]),(0,_.default)(i[1])]:void 0,onFocus:d,onChange:u}):(0,e.jsx)("span",{className:"text_wrap w_100 line_clamp_1 border_box inline_flex align_center",children:i?`${(0,_.default)(i[0]).format(Array.isArray(m)?m[0]:m)} - ${(0,_.default)(i[1]).format(Array.isArray(m)?m[1]:m)}`:"-"})})}),ot=(0,c.createContext)(),oa=ot.Provider,on=e=>(0,c.useContextSelector)(ot,e);var od=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Select/index.module.css"),oc={};oc.styleTagTransform=ea(),oc.setAttributes=er(),oc.insert=eo().bind(null,"head"),oc.domAPI=K(),oc.insertStyleElement=ei(),U()(od.Z,oc);let om=od.Z&&od.Z.locals?od.Z.locals:void 0;class ou{constructor(){this.antd=null,this.base_url="",this.remote=null,this.multiple=!1,this.options=[],this.search_props={},this.loading_search=!1,(0,b.makeAutoObservable)(this,{antd:!1,base_url:!1,remote:!1,multiple:!1},{autoBind:!0})}init(e){let{antd:o,options_raw:l,base_url:r,remote:i,multiple:t}=e;this.antd=o,this.base_url=r,l&&(this.options=l),i&&(this.remote=i,this.remote.search?this.search_props={showSearch:!0,filterOption:!1,defaultActiveFirstOption:!1,onSearch:(0,s.debounce)(this.search,450,{leading:!1})}:this.get()),this.multiple=t}async get(){let e=this.remote,o=e.query,l=`${e.api}|${new URLSearchParams(o).toString()}`,r=(0,f.decode)(sessionStorage.getItem(l));if(r)return this.options=r;let s=-1!==e.api.indexOf("https")?e.api:`${this.base_url}${e.api}`,[i,t]=await (0,h.default)((0,g.ofetch)(s,{query:o}));return i?(this.antd.message.error(`Query error: ${i?.message}`),!1):"error"in t?(this.antd.message.error(`${t.error}: ${t.message}`),!1):void(this.options=t,sessionStorage.setItem(l,(0,f.encode)(t)))}async search(e){this.loading_search=!0;let o=this.remote,l=o.search,r={...o.query,[l]:e},s=-1!==o.api.indexOf("https")?o.api:`${this.base_url}${o.api}`,[i,t]=await (0,h.default)((0,g.ofetch)(s,{query:r}));return(this.loading_search=!1,i)?(this.antd.message.error(`Query error: ${i?.message}`),!1):"error"in t?(this.antd.message.error(`${t.error}: ${t.message}`),!1):void(this.options=t)}}let{useApp:op}=l.App,o_=n.$.memo((0,t.observer)(o=>{let{self_props:r,width:s,value:i,editing:t,use_by_form:d,use_by_filter:c,onFocus:m,onBlur:u,onChange:p}=o,{options:_,remote:h,single:b,mode:g,borderless:f,...x}=r||{},[v]=(0,a.useState)(()=>new ou),j=op(),y=on(e=>e.base_url),w="multiple"===g||"tags"===g,S=n.$.copy(v.options);(0,a.useLayoutEffect)(()=>{v.init({antd:j,options_raw:_,base_url:y,remote:h,multiple:w})},[j,_,y,h,w]);let k=(0,a.useMemo)(()=>S.map(o=>(o.icon&&(o.label=(0,e.jsxs)("div",{className:"h_100 flex align_center",children:[(0,e.jsx)("div",{className:"icon_wrap flex justify_center align_center",style:{width:16,height:16},children:(0,e.jsx)("i",{className:`ph ph-${o.icon}`})}),(0,e.jsx)("span",{className:"text ml_4",children:o.label})]}),delete o.icon),o)),[S]),N=(0,a.useMemo)(()=>{if(w){if(!i||!Array.isArray(i)||!i.length)return;return k.filter(e=>i.includes(e.value)).map(e=>e.label).join(",")}return k.length?k.find(e=>e.value===i)?.label:i},[k,i]),C=n.$.copy(v.search_props),T=(g||!!s||h?.search)&&"w_100";return(0,e.jsx)("div",{className:n.$.cx(om._local,f&&om.borderless),style:{width:s},children:t?(0,e.jsx)(l.Select,{...x,...C,className:n.$.cx(T),classNames:{popup:{root:om.popup}},size:d?"middle":"small",popupMatchSelectWidth:!1,virtual:!1,suffixIcon:null,mode:b?void 0:c?"multiple":g,options:S,value:i,notFoundContent:v.loading_search?(0,e.jsx)(l.Spin,{size:"small"}):null,getPopupContainer:()=>document.body,onOpenChange:m,onFocus:m,onBlur:u,onChange:p}):(0,e.jsx)("span",{className:n.$.cx("text_wrap border_box inline_flex align_center",T,!N&&"placeholder"),children:N||r.placeholder})})}));var oh=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Tag/index.module.css"),ob={};ob.styleTagTransform=ea(),ob.setAttributes=er(),ob.insert=eo().bind(null,"head"),ob.domAPI=K(),ob.insertStyleElement=ei(),U()(oh.Z,ob);let og=oh.Z&&oh.Z.locals?oh.Z.locals:void 0,of=n.$.memo(o=>{let{self_props:l,width:r,value:s,use_by_form:i}=o,{options:t,mode:d="full",dot_shape:c="circle",dot_size:m=9,icon_size:u="1em",icon_position:p="left",use_bg:_,prefix:h,suffix:b}=l,g=(0,a.useMemo)(()=>t.find(e=>e.value===s||"__self__"===e.value),[s,t]),f=(0,a.useMemo)(()=>{if(!g?.color)return;let e="";return(e="function"==typeof g.color?g.color(s):g.color)in ef&&(e=ef[e]),e},[g?.color,s]);return g?(0,e.jsx)("div",{className:n.$.cx("border_box inline_flex align_center",og._local,"dot"===d&&og.dot_mode,i&&og.use_by_form),style:{width:r,"--tag_color":f},children:(0,e.jsxs)("div",{className:n.$.cx("option_wrap inline_flex align_center",d,_&&"use_bg","right"===p&&"position_right"),children:[g.icon?(0,e.jsx)("span",{className:"icon_wrap flex justify_center align_center",style:{width:u,height:u,fontSize:u},children:(0,e.jsx)("i",{className:`ph ph-${"function"==typeof g.icon?g.icon(s):g.icon}`})}):(0,e.jsx)("span",{className:n.$.cx("dot",c),style:{width:m,height:m}}),(0,e.jsxs)("span",{className:"text",children:[h,g.label||("__self__"===g.value?s:g.value),b]})]})}):"-"});var ox=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Text/index.module.css"),ov={};ov.styleTagTransform=ea(),ov.setAttributes=er(),ov.insert=eo().bind(null,"head"),ov.domAPI=K(),ov.insertStyleElement=ei(),U()(ox.Z,ov);let oj=ox.Z&&ox.Z.locals?ox.Z.locals:void 0,oy=n.$.memo(o=>{let{value:l,use_by_form:r,disabled:s,item:i,self_props:t}=o,{format:d,prefix:c,suffix:m,textwrap:u}=t||{},p=(0,a.useMemo)(()=>l?d?x.default.render(d,i||{}):u?x.default.render(u,{value:l}):`${c??""}${l}${m??""}`:"-",[l,d,c,m,u]);return(0,e.jsx)("span",{className:n.$.cx("border_box",oj._local,r&&oj.use_by_form,s&&oj.disabled),children:p})});var ow=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/fields/Textarea/index.module.css"),oS={};oS.styleTagTransform=ea(),oS.setAttributes=er(),oS.insert=eo().bind(null,"head"),oS.domAPI=K(),oS.insertStyleElement=ei(),U()(ow.Z,oS);let ok=ow.Z&&ow.Z.locals?ow.Z.locals:void 0,{TextArea:oN}=l.Input,oC=n.$.memo(l=>{let{self_props:r,width:i,value:t,editing:a,use_by_form:d,onFocus:c,onBlur:m,onChange:u}=l,{}=r||{},p=u?(0,o.useMemoizedFn)((0,s.debounce)(u,600)):void 0;return(0,e.jsx)("div",{className:n.$.cx("w_100 flex align_center",ok._local,d&&ok.use_by_form),style:{width:i},children:a?(0,e.jsx)(oN,{...r,className:"w_100 line_clamp_1",variant:d?"outlined":"borderless",defaultValue:t,onFocus:c,onBlur:m,onChange:p}):(0,e.jsx)("span",{className:"text_wrap border_box",children:t})})}),oT=n.$.memo(o=>{let{column:l,value:r,item:s,force_type:i,editing:t,disabled:n,use_by_filter:d,use_by_form:c,onFocus:m,onBlur:u,onChange:p}=o,{type:_,width:h,props:b}=l,g=(0,a.useMemo)(()=>{switch(i||_){case"text":return oy;case"input":return eV;case"input_number":return e0;case"textarea":return oC;case"select":return o_;case"tag":return of;case"date":return eI;case"date_picker":return eL;case"range_picker":return oi;case"priority":return oe;case"editor":return eO;case"comments":return eM;case"operation":return e8}},[i,_]);return(0,e.jsx)(g,{self_props:b,value:r,editing:t,item:s,disabled:n,use_by_filter:d,use_by_form:c,onFocus:m,onBlur:u,onChange:p,width:c?void 0:h})}),oA=n.$.memo(o=>(0,e.jsx)(oT,{...o,editing:!0,use_by_form:!0})),{Item:o$}=l.Form,oH=n.$.memo(o=>{let{filter_columns:r,filter_field_options:s,filter_relation:i,filter_param:t,name:n,onChangeRelation:c,remove:m,..._}=o,{attributes:h,listeners:b,transform:g,transition:f,setNodeRef:x,setActivatorNodeRef:v}=(0,u.useSortable)({id:n}),{field:j,expression:y}=t,w=(0,a.useMemo)(()=>r.find(e=>e.bind===j),[j,r]),S=(0,a.useMemo)(()=>ev[w.datatype].map(e=>({label:e,value:e})),[w]),k=(0,a.useMemo)(()=>ej(w.datatype,y),[w,y]);return(0,e.jsxs)("div",{className:"form_list_item w_100 flex",style:{transform:p.CSS.Translate.toString(g),transition:f},ref:x,...h,children:[(0,e.jsxs)("div",{className:"relation_wrap",children:[0===n&&(0,e.jsx)("span",{className:"relation_item flex justify_center align_center",children:"where"}),1===n&&(0,e.jsx)("span",{className:"relation_item",children:(0,e.jsx)(l.Select,{className:"w_100",options:eb,value:i,onChange:c})}),n>1&&(0,e.jsx)("span",{className:"relation_item flex justify_center align_center",children:i})]}),(0,e.jsx)(o$,{..._,className:"field_name",name:[n,"field"],children:(0,e.jsx)(l.Select,{showSearch:!0,options:s})}),(0,e.jsx)(o$,{..._,className:"expression_value",name:[n,"expression"],children:(0,e.jsx)(l.Select,{popupMatchSelectWidth:!1,options:S})}),(0,e.jsx)(o$,{..._,className:"filter_value",name:[n,"value"],children:(0,e.jsx)(oA,{column:w,disabled:!1,force_type:k,use_by_filter:!0})}),(0,e.jsx)(l.Button,{className:"btn",onClick:()=>m(n),children:(0,e.jsx)(d.Trash,{})}),(0,e.jsx)(l.Button,{...b,className:"btn",ref:v,children:(0,e.jsx)(d.DotsSixVertical,{weight:"bold"})})]})}),{useForm:oz,List:oZ}=l.Form,oM=n.$.memo(r=>{let{filter_columns:s,filter_relation:i,filter_params:t,use_by_view:p,onChangeFilter:_}=r,[h]=oz(),b=t.length,{setFieldsValue:g,getFieldsValue:f}=h,{default_option:x,filter_field_options:v}=(0,a.useMemo)(()=>{let e=s[0];return{default_option:{field:e.bind,expression:ev[e.datatype][0]},filter_field_options:s.map(e=>({label:e.name,value:e.bind}))}},[s]);(0,a.useLayoutEffect)(()=>{let e={items:t||[]},o=f();(0,c.deepEqual)(e,o)||g(e)},[t]);let j=(0,o.useMemoizedFn)(()=>_({filter_params:[]})),y=(0,o.useMemoizedFn)(()=>{let e=f().items.filter(e=>e);if(!e.length)return j();e.every(e=>e.field&&e.expression)&&(e.map(e=>{let o=ev[s.find(o=>o.bind===e.field).datatype];o.includes(e.expression)||(e.expression=o[0])}),_({filter_params:e}))}),w=(0,o.useMemoizedFn)(e=>{_({filter_relation:e})}),S=(0,a.useMemo)(()=>t.some(e=>"is between"===e.expression),[t]),k=(0,e.jsxs)("div",{className:n.$.cx("flex flex_column",ec.popover_wrap,S&&ec.has_range_picker),children:[(0,e.jsx)("span",{className:"title",children:b?"Filters":"No filters applied"}),(0,e.jsx)("div",{className:"w_100 flex",children:(0,e.jsx)(l.Form,{className:"w_100 flex",form:h,onValuesChange:y,onFieldsChange:e=>{if(!e[0])return;let o=e[0]?.name;if(o?.length===3&&"items"===o.at(0)&&"field"===o.at(-1)){let e=o[1],l=f().items;delete l[e].value,_({filter_params:l,ignore_query:!0})}},children:(0,e.jsx)(oZ,{name:"items",children:(o,{add:r,remove:d,move:c})=>(0,e.jsxs)("div",{className:"form_list_wrap w_100 flex flex_column",children:[(0,e.jsx)("div",{className:"form_list_items w_100 flex flex_column",children:o.length?(0,e.jsx)(m.DndContext,{onDragEnd:({active:e,over:o})=>{o&&c(e.id,o.id)},children:(0,e.jsx)(u.SortableContext,{items:o.map(e=>({...e,id:e.name})),strategy:u.verticalListSortingStrategy,children:o.map(e=>(0,a.createElement)(oH,{filter_relation:i,filter_columns:s,filter_field_options:v,filter_param:t[e.name]||x,onChangeRelation:w,remove:d,...e,key:e.key}))})}):(0,e.jsx)("div",{className:"desc",children:"Add filters to refine your rows."})}),(0,e.jsxs)("div",{className:n.$.cx("form_list_actions filter_actions flex",o.length>0&&"has_items"),style:{paddingLeft:80*(o.length>0)},children:[(0,e.jsx)(l.Button,{className:"clickable",type:"primary",onClick:()=>r(x),children:"Add filter"}),b>0&&(0,e.jsx)(l.Button,{className:"clickable",onClick:j,children:"Reset filters"})]})]})})})})]});return p?k:(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottomLeft",content:k,forceRender:!0,children:(0,e.jsx)("div",{children:(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable mr_8",children:[(0,e.jsx)(d.FunnelSimple,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Filter"}),b>0&&(0,e.jsx)("span",{className:"counts flex align_center",children:b})]})})})}),oD=n.$.memo(r=>{let{item:s,index:i,onChange:t}=r,{attributes:a,listeners:n,transform:c,transition:m,setNodeRef:_,setActivatorNodeRef:h}=(0,u.useSortable)({id:s.name,disabled:"_operation"===s.id}),b=(0,o.useMemoizedFn)(()=>t(i,s.visible));return(0,e.jsxs)("div",{className:"field w_100 border_box flex align_center justify_between cursor_point",style:{transform:p.CSS.Translate.toString(c),transition:m},ref:_,...a,onClick:b,children:[(0,e.jsxs)("div",{className:"field_left flex align_center",children:[(0,e.jsx)(l.Checkbox,{checked:s.visible}),(0,e.jsx)("span",{className:"name",children:s.name})]}),(0,e.jsx)("div",{className:"btn_drag flex justify_center align_center",ref:h,children:(0,e.jsx)(d.DotsSixVertical,{...n,weight:"bold"})})]})}),oF=n.$.memo(r=>{let{visible_columns:s,use_by_view:i,onChangeVisibleColumns:t}=r,a=(0,o.useMemoizedFn)((e,o)=>{let l=n.$.copy(s);l[e].visible=!o,t(l)}),c=(0,o.useMemoizedFn)(({active:e,over:o})=>{let l,r;o&&"_operation"!==o.id&&(s.forEach((s,i)=>{s.name===e.id&&(l=i),s.name===o.id&&(r=i)}),t((0,u.arrayMove)(s,l,r)))}),p=(0,e.jsx)("div",{className:n.$.cx("flex flex_column",ec.popover_wrap,ec.fields_wrap),children:(0,e.jsx)(m.DndContext,{onDragEnd:c,children:(0,e.jsx)(u.SortableContext,{items:s.map(e=>({...e,id:e.name})),strategy:u.verticalListSortingStrategy,children:s.map((o,l)=>(0,e.jsx)(oD,{item:o,index:l,onChange:a},o.name))})})});return i?p:(0,e.jsx)(l.Popover,{rootClassName:"fields_popover",trigger:["click"],placement:"bottomRight",content:p,destroyOnHidden:!0,children:(0,e.jsx)("div",{children:(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable",children:[(0,e.jsx)(d.SlidersHorizontal,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Fields"})]})})})}),{Item:oE}=l.Form,oI=n.$.memo(l=>{let{column:r,value:s,row_index:i,focus:t,item:m,group_info:u,group_level:p,group_replace:_,setEditingField:h,onToggleGroupItems:b}=l,{type:g,bind:f,readonly:x}=r,v=(0,a.useRef)(null),[j,y]=(0,a.useState)(!1);(0,a.useLayoutEffect)(()=>{let e=v.current;if(!e||x||e_.includes(g))return;let o=()=>y(!0),l=()=>y(!1);return e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",l),()=>{e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",l)}},[x,g]);let w=(0,o.useMemoizedFn)(e=>{e?h?.({row_index:i,field:f,focus:!0}):h?.(null)}),S=(0,o.useMemoizedFn)(()=>h?.(null)),k={column:r,editing:t||j};k.editing?(k.onFocus=w,k.onBlur=S):k.value=s,m&&(k.item=m),void 0!==_&&(k.group_replace=_);let N=(0,c.useDeepMemo)(()=>(0,e.jsx)(oT,{...k}),[k]),C=u?(0,o.useMemoizedFn)(()=>b?.(u.group_id)):void 0;return(0,e.jsxs)("td",{className:n.$.cx("form_table_td","operation"===g&&"operation",r.sticky&&"sticky left_0"),width:r.width,style:{textAlign:r.align},ref:v,children:[p&&(0,e.jsx)("span",{style:{paddingLeft:`calc((1.2em + 8px) * ${p})`}}),u&&(0,e.jsx)("span",{className:n.$.cx("btn_toggle_group inline_flex justify_center align_center clickable",u.group_visible_self&&"visible"),onClick:C,children:(0,e.jsx)(d.CaretRight,{weight:"bold"})}),void 0!==_?_:k.editing?(0,e.jsx)(oE,{name:f,noStyle:!0,children:N}):N]})}),{useForm:oP}=l.Form,oR=n.$.memo(r=>{let{table_columns:i,modal_index:t,item:d,index:m,editing_info:u,row_bg:p,row_click:_,onChange:h,onRowClick:b,setEditingInfo:g,onToggleGroupItems:f}=r,[x]=oP(),{setFieldsValue:v,getFieldsValue:j}=x,y=(0,o.useMemoizedFn)(e=>{g(e?{row_index:m,field:e.field,focus:e.focus}:null)});(0,a.useLayoutEffect)(()=>{let e=j();(0,c.deepEqual)(d,e)||v(d)},[d]);let w=(0,o.useMemoizedFn)(e=>{h(m,e),y(null)}),S=(0,a.useMemo)(()=>{if(!p)return{};let{bind:e,options:o}=p;if(!(e in d))return{};let l=o[d[e]];return{"--row_bg":ef[l]??l}},[p,d]),k=(0,o.useMemoizedFn)(()=>b(m));return(0,e.jsx)(l.Form,{form:x,component:!1,onValuesChange:w,children:(0,e.jsx)("tr",{className:n.$.cx("form_table_tr",t===m+1&&"selected_prev",t===m&&"selected",d.__stat_type__&&"stat_row",S["--row_bg"]&&"has_row_bg",_&&"cursor_point"),style:S,onClick:_?k:void 0,children:i.map((o,l)=>{let r,i=o.bind===d.__group_field__&&o.name===d.__group_name__||o.name===d.__group_replace__?.name,t=i&&!d.__group_bottom__?{group_id:d.__group_id__,group_visible_self:d.__group_visible_self__,group_visible_children:d.__group_visible_children__}:void 0,a=(o.name===d.__group_name__||o.name===d.__group_replace__?.name)&&d.__group_level__?d.__group_level__:void 0;return d.__group_replace__&&d.__group_replace__.name===o.name&&(r=d.__group_replace__.value),!d.__stat_type__||o.bind in d||(r=""),d.__stat_type__&&(0===l?r=d.__stat_type__.toUpperCase():"COUNT"===d.__stat_type__&&o.bind in d&&(r=d[o.bind])),(0,e.jsx)(oI,{column:o,value:(0,s.get)(d,o.bind),group_replace:r,row_index:m,focus:!o.readonly&&u&&o.bind===u.field,item:"text"===o.type&&o.props?.format?d:void 0,group_info:t,group_level:a,setEditingField:o.readonly?void 0:y,onToggleGroupItems:i?f:void 0},o.name)})})})}),oQ=n.$.memo(l=>{let{column:r,order:s,onSort:i}=l,{type:t,name:a,bind:c,sort:m}=r,u="operation"===t,p=u?"":a,_=(0,o.useMemoizedFn)(()=>i?.(c));return(0,e.jsx)("th",{className:n.$.cx("form_table_th",m&&"sort cursor_point",r.sticky&&"sticky left_0",u&&"sticky right_0"),style:{textAlign:r.align},onClick:m?_:void 0,children:m?(0,e.jsxs)("div",{className:"inline_flex align_center",children:[(0,e.jsx)("span",{children:a}),(0,e.jsxs)("div",{className:n.$.cx("table_sort flex_column justify_center",s&&"order"),children:[("asc"===s||!s)&&(0,e.jsx)(d.CaretUp,{className:"asc",weight:"bold"}),("desc"===s||!s)&&(0,e.jsx)(d.CaretDown,{className:"desc",weight:"bold"})]})]}):p})}),oL=n.$.memo(r=>{let{primary:s,table_columns:i,data:t,editing_info:d,sort_params:c,modal_index:m,table_props:u,onChange:p,onSort:_,onRowClick:h,setEditingInfo:b,setItems:g}=r,f=(0,a.useRef)(null),x=(0,a.useRef)(null),v=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(f.current&&x.current)return v.current=new n.StickyTableHeader(f.current,x.current,{max:u.header_sticky_top||0}),()=>v.current?.destroy()},[c,u.header_sticky_top]);let j=(0,o.useMemoizedFn)(e=>{if(e.sort&&c.length)return c.find(o=>o.field===e.bind)?.order}),y=(0,o.useMemoizedFn)(e=>{let o=n.$.copy(t),l=e.split("/"),r=[],s=null;o.forEach(o=>{if(!o.__stat_type__){let i=o.__group_id__.split("/");o.__group_id__===e?(s=!o.__group_visible_self__,o.__group_visible_self__=!o.__group_visible_self__):-1!==o.__group_id__.indexOf(e)&&(s?i.length-1===l.length&&(o.__group_visible_children__=!o.__group_visible_children__):(o.__group_visible_self__=!1,o.__group_visible_children__=!1)),r.push(o)}}),g(r)}),w=n.$.cx("table_wrap w_100",u?.border&&"border_style");return(0,e.jsxs)(a.Fragment,{children:[(0,e.jsx)("div",{className:"table_container w_100",children:(0,e.jsxs)("table",{className:w,ref:f,children:[(0,e.jsx)("thead",{children:(0,e.jsx)("tr",{className:n.$.cx(0===m&&"selected"),children:i.map(o=>(0,e.jsx)(oQ,{column:o,order:j(o),onSort:o.sort?_:void 0},o.name))})}),t.length?(0,e.jsx)("tbody",{children:t.map((o,l)=>o.__group_top__||!1!==o.__group_visible_children__?(0,e.jsx)(oR,{table_columns:i,modal_index:m,item:o,index:l,editing_info:d?.row_index===l&&d?d:null,row_bg:u?.row_bg,row_click:u?.row_click,onChange:p,onRowClick:h,setEditingInfo:b,onToggleGroupItems:y},o[s]||o.__group_id__||o.__stat_type__):null)}):(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)("td",{colSpan:9999,children:(0,e.jsx)("div",{className:"w_100 flex justify_center align_center",style:{height:300},children:(0,e.jsx)(l.Empty,{description:null})})})})})]})}),(0,e.jsx)("div",{className:"table_container clone w_100",style:{zIndex:103},children:(0,e.jsx)("table",{className:w,ref:x})})]})}),oW=n.$.memo(o=>{let{pagination:r,onChangePagination:s}=o,{page:i,pagesize:t,total:a}=r;return(0,e.jsx)("div",{className:n.$.cx("w_100",ec.Pagination),children:(0,e.jsx)(l.Pagination,{align:"end",showSizeChanger:!0,total:a,current:i,pageSize:t,pageSizeOptions:ep,showTotal:e=>`Total ${e} records`,onChange:s})})}),{useForm:oq,Item:oB}=l.Form,oO=n.$.memo(r=>{let{form_columns:s,modal_type:i,item:t,loading:n,onSubmit:d,onClose:m}=r,[u]=oq(),{setFieldsValue:p,getFieldsValue:_,resetFields:h}=u,b="view"===i;(0,a.useLayoutEffect)(()=>{if(!t)return h();let e=_();(0,c.deepEqual)(t,e)||p(t)},[t]);let g=(0,o.useMemoizedFn)(e=>{d(e)});return(0,e.jsx)(l.ConfigProvider,{theme:{token:{controlHeight:30,controlHeightSM:30}},children:(0,e.jsxs)(l.Form,{className:ec.Detail,form:u,layout:"vertical",disabled:b,onFinish:g,children:[(0,e.jsx)(l.Row,{gutter:12,wrap:!0,children:s.map((o,r)=>(0,e.jsx)(l.Col,{span:o.span||12,children:(0,e.jsx)(oB,{label:o.name,name:o.bind,children:(0,e.jsx)(oA,{column:o,disabled:b||o.readonly,item:"text"===o.type&&o.props?.format?t:void 0})})},r))}),"view"!==i&&(0,e.jsxs)("div",{className:"actions_wrap w_100 border_box flex justify_end sticky bottom_0",children:[(0,e.jsx)(l.Button,{onClick:m,children:"Cancel"}),(0,e.jsx)(l.Button,{type:"primary",htmlType:"submit",loading:n,children:"Save"})]})]})})});var oY=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/View/index.module.css"),oG={};oG.styleTagTransform=ea(),oG.setAttributes=er(),oG.insert=eo().bind(null,"head"),oG.domAPI=K(),oG.insertStyleElement=ei(),U()(oY.Z,oG);let oX=oY.Z&&oY.Z.locals?oY.Z.locals:void 0,{Item:oV}=l.Form,oU=n.$.memo(o=>{let{group_field_options:r,name:s,remove:i,...t}=o,{attributes:a,listeners:n,transform:c,transition:m,setNodeRef:_,setActivatorNodeRef:h}=(0,u.useSortable)({id:s});return(0,e.jsxs)("div",{className:"form_list_item w_100 flex",style:{transform:p.CSS.Translate.toString(c),transition:m},ref:_,...a,children:[(0,e.jsx)(oV,{...t,className:"field_name",name:[s],children:(0,e.jsx)(l.Select,{showSearch:!0,labelInValue:!0,placeholder:"Select group field",options:r})}),(0,e.jsx)(l.Button,{className:"btn",onClick:()=>i(s),children:(0,e.jsx)(d.Trash,{})}),(0,e.jsx)(l.Button,{...n,className:"btn",ref:h,children:(0,e.jsx)(d.DotsSixVertical,{weight:"bold"})})]})}),{useForm:oJ,List:oK,Item:o0}=l.Form,o1=n.$.memo(r=>{let{group_params:i,use_by_view:t,getGroupFieldOptions:p,onChangeGroup:_}=r,[h]=oJ(),{setFieldsValue:b,getFieldsValue:g}=h,{fields:f,acc:x}=i||{},v=f.length,j=(0,a.useMemo)(()=>p(f),[f]);(0,a.useLayoutEffect)(()=>{let e={items:f,acc:x},{form_items:o=[],acc:l=[]}=g(),r={items:o.map(e=>({label:e.label,value:e.value})),acc:l};(0,c.deepEqual)(e,r)||b(e)},[f,x]);let y=(0,o.useMemoizedFn)(()=>_({fields:[],acc:[]})),w=(0,o.useMemoizedFn)(()=>{let e=g(),o=(e.items||[]).map(e=>(0,s.pick)(e,["label","value"])).filter(e=>e.value),l=(e.acc||[]).map(e=>(0,s.pick)(e,["label","value"])).filter(e=>e.value);(0,c.deepEqual)({fields:f,acc:x},{fields:o,acc:l})||_({fields:o,acc:l})}),S=(0,e.jsx)("div",{className:n.$.cx("flex flex_column",ec.popover_wrap,ec.group_wrap),children:(0,e.jsxs)(l.Form,{className:"flex flex_column",form:h,onValuesChange:w,children:[(0,e.jsxs)("div",{className:"acc_wrap flex flex_column",children:[(0,e.jsx)("span",{className:"title",children:"Acc"}),(0,e.jsx)(o0,{name:"acc",children:(0,e.jsx)(l.Select,{mode:"multiple",labelInValue:!0,placeholder:"Select acc fields",options:j})})]}),(0,e.jsx)("span",{className:"title",children:v?"Group By":"No grouping applied"}),(0,e.jsx)(oK,{name:"items",children:(o,{add:r,remove:s,move:i})=>(0,e.jsxs)("div",{className:"form_list_wrap w_100 flex flex_column",children:[(0,e.jsx)("div",{className:"form_list_items w_100 flex flex_column",children:o.length?(0,e.jsx)(m.DndContext,{onDragEnd:({active:e,over:o})=>{o&&i(e.id,o.id)},children:(0,e.jsx)(u.SortableContext,{items:o.map(e=>({...e,id:e.name})),strategy:u.verticalListSortingStrategy,children:o.map(e=>(0,a.createElement)(oU,{group_field_options:j,remove:s,...e,key:e.key}))})}):(0,e.jsx)("div",{className:"desc",children:"Add grouping to group your rows."})}),(0,e.jsxs)("div",{className:n.$.cx("form_list_actions flex",o.length>0&&"has_items"),children:[(0,e.jsx)(l.Button,{className:"clickable",type:"primary",onClick:()=>r(),children:"Add Group"}),v>0&&(0,e.jsx)(l.Button,{className:"clickable",onClick:y,children:"Reset grouping"})]})]})})]})});return t?S:(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottomLeft",content:S,forceRender:!0,children:(0,e.jsx)("div",{children:(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable mr_8",children:[(0,e.jsx)(d.CaretDoubleRight,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Group"}),v>0&&(0,e.jsx)("div",{className:"flex group_fields",children:f.map(o=>(0,e.jsxs)("div",{className:"group_field flex align_center",children:[(0,e.jsx)("div",{className:"counts flex align_center",children:o.label}),(0,e.jsx)("span",{className:"caret",children:">"})]},o.value))})]})})})}),{Item:o3}=l.Form,o2=n.$.memo(o=>{let{visible_columns:r,name:s,remove:i,...t}=o,{attributes:a,listeners:n,transform:c,transition:m,setNodeRef:_,setActivatorNodeRef:h}=(0,u.useSortable)({id:s});return(0,e.jsxs)("div",{className:"form_list_item w_100 flex",style:{transform:p.CSS.Translate.toString(c),transition:m},ref:_,...a,children:[(0,e.jsx)(o3,{...t,className:"field_name",name:[s,"field"],children:(0,e.jsx)(l.Select,{showSearch:!0,fieldNames:{label:"name",value:"id"},options:r})}),(0,e.jsx)(o3,{...t,className:"sort_value",name:[s,"type"],children:(0,e.jsx)(l.Select,{options:[...eg]})}),(0,e.jsx)(l.Button,{className:"btn",onClick:()=>i(s),children:(0,e.jsx)(d.Trash,{})}),(0,e.jsx)(l.Button,{...n,className:"btn",ref:h,children:(0,e.jsx)(d.DotsSixVertical,{weight:"bold"})})]})}),{useForm:o8,List:o5}=l.Form,o6=n.$.memo(r=>{let{stat_params:i,visible_columns:t,use_by_view:p,onChangeStat:_}=r,[h]=o8(),b=i.length,{setFieldsValue:g,getFieldsValue:f}=h;(0,a.useLayoutEffect)(()=>{let e={items:i},o=f();(0,c.deepEqual)(e,o)||g(e)},[i]);let x=(0,o.useMemoizedFn)(()=>_([])),v=(0,o.useMemoizedFn)(()=>{let e=f().items.filter(e=>e);if(!e.length)return x();e.every(e=>e.field&&e.type)&&_((0,s.uniqBy)(e,e=>`${e.field}-${e.type}`))}),j=(0,e.jsxs)("div",{className:n.$.cx("flex flex_column",ec.popover_wrap),children:[(0,e.jsx)("span",{className:"title",children:b?"Stat By":"No stating applied"}),(0,e.jsx)(l.Form,{className:"flex align_center",form:h,onValuesChange:v,children:(0,e.jsx)(o5,{name:"items",children:(o,{add:r,remove:s,move:i})=>(0,e.jsxs)("div",{className:"form_list_wrap w_100 flex flex_column",children:[(0,e.jsx)("div",{className:"form_list_items w_100 flex flex_column",children:o.length?(0,e.jsx)(m.DndContext,{onDragEnd:({active:e,over:o})=>{o&&i(e.id,o.id)},children:(0,e.jsx)(u.SortableContext,{items:o.map(e=>({...e,id:e.name})),strategy:u.verticalListSortingStrategy,children:o.map(e=>(0,a.createElement)(o2,{visible_columns:t,remove:s,...e,key:e.key}))})}):(0,e.jsx)("div",{className:"desc",children:"Add stating to stat your rows."})}),(0,e.jsxs)("div",{className:n.$.cx("form_list_actions flex",o.length>0&&"has_items"),children:[(0,e.jsx)(l.Button,{className:"clickable",type:"primary",onClick:()=>r(),children:"Add stat"}),b>0&&(0,e.jsx)(l.Button,{className:"clickable",onClick:x,children:"Reset stating"})]})]})})})]});return p?j:(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottomLeft",content:j,forceRender:!0,children:(0,e.jsx)("div",{children:(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable mr_8",children:[(0,e.jsx)(d.ArrowsDownUp,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Stat"}),b>0&&(0,e.jsx)("span",{className:"counts flex align_center",children:b})]})})})}),o4=n.$.memo(r=>{let{hide:s,filter_columns:i,visible_columns:t,view:a,view_index:n,getSortFieldOptions:c,getGroupFieldOptions:m,remove:u,onApplyView:p,onChangeView:_}=r,h=(0,o.useMemoizedFn)(e=>{_(n,{...a,name:e.target.value})}),b=(0,o.useMemoizedFn)(()=>u(n)),g=(0,o.useMemoizedFn)(()=>p(a)),f={sort_field_options:c(a.sort_params),sort_params:a.sort_params,use_by_view:!0,onChangeSort:(0,o.useMemoizedFn)(e=>_(n,{...a,sort_params:e}))},x={filter_columns:i,filter_relation:a.filter_relation,filter_params:a.filter_params,use_by_view:!0,onChangeFilter:(0,o.useMemoizedFn)(e=>_(n,{...a,...e}))},v={visible_columns:t,stat_params:a.stat_params,use_by_view:!0,onChangeStat:(0,o.useMemoizedFn)(e=>_(n,{...a,stat_params:e}))},j={group_params:a.group_params,use_by_view:!0,getGroupFieldOptions:m,onChangeGroup:(0,o.useMemoizedFn)(e=>_(n,{...a,group_params:e}))},y={visible_columns:a.visible_columns,use_by_view:!0,onChangeVisibleColumns:(0,o.useMemoizedFn)(e=>_(n,{...a,visible_columns:e}))};return(0,e.jsxs)("div",{className:"view_item_wrap flex flex_column",children:[(0,e.jsxs)("div",{className:"view_option name_wrap w_100 flex justify_between align_center",children:[(0,e.jsx)(l.Input,{className:"view_name",value:a.name,variant:"borderless",onChange:h}),(0,e.jsxs)("div",{className:"view_actions flex align_center",children:[(0,e.jsx)(l.Button,{className:"btn_remove btn",onClick:b,children:(0,e.jsx)(d.Trash,{})}),(0,e.jsx)(l.Button,{className:"btn_apply btn",type:"primary",onClick:g,children:"Apply"})]})]}),(0,e.jsx)("div",{className:"view_option w_100",children:(0,e.jsx)(eN,{...f})}),(0,e.jsx)("div",{className:"view_option w_100",children:(0,e.jsx)(oM,{...x})}),!s?.stat&&(0,e.jsx)("div",{className:"view_option w_100",children:(0,e.jsx)(o6,{...v})}),!s?.group&&(0,e.jsx)("div",{className:"view_option w_100",children:(0,e.jsx)(o1,{...j})}),(0,e.jsx)("div",{className:"view_option w_100",children:(0,e.jsx)(oF,{...y})})]})}),o9=n.$.memo(r=>{let{hide:s,filter_columns:i,visible_columns:t,views:d,getSortFieldOptions:c,getGroupFieldOptions:m,onApplyView:u,onChangeViews:p}=r,_=(0,o.useMemoizedFn)((e,o)=>{let l=n.$.copy(d);l[e]=o,p(l)}),h=(0,o.useMemoizedFn)(e=>{let o=n.$.copy(d);o.splice(e,1),p(o)});return d.length?(0,e.jsx)("div",{className:n.$.cx("w_100 flex flex_column",oX._local),children:d.map((e,o)=>(0,a.createElement)(o4,{hide:s,filter_columns:i,visible_columns:t,view:e,view_index:o,getSortFieldOptions:c,getGroupFieldOptions:m,onApplyView:u,onChangeView:_,remove:h,key:o}))}):(0,e.jsx)("div",{className:n.$.cx("w_100 h_100 flex justify_center align_center",oX.empty),children:(0,e.jsx)(l.Empty,{description:null})})});var o7=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Select/index.module.css"),le={};le.styleTagTransform=ea(),le.setAttributes=er(),le.insert=eo().bind(null,"head"),le.domAPI=K(),le.insertStyleElement=ei(),U()(o7.Z,le);let lo=o7.Z&&o7.Z.locals?o7.Z.locals:void 0,ll=n.$.memo(o=>{let{self_props:r,width:s,value:i,editing:t,use_by_form:d,use_by_filter:c,onFocus:m,onBlur:u,onChange:p}=o,{options:_,remote:h,mode:b,borderless:g,...f}=r,x=void 0!==b,v=(0,a.useMemo)(()=>{if(!_||!_.length)return i;if(x){if(!i||!Array.isArray(i)||!i.length)return;return _.filter(e=>i.includes(e.value)).map(e=>e.label).join(",")}return _.find(e=>e.value===i)?.label},[_,i]);return(0,e.jsx)("div",{className:n.$.cx(lo._local,g&&lo.borderless),style:{width:s},children:t?(0,e.jsx)(l.Select,{...f,className:n.$.cx((b||!!s||h?.search)&&"w_100"),classNames:{popup:{root:n.$.cx(lo.popup)}},size:d?"middle":"small",popupMatchSelectWidth:!1,virtual:!1,suffixIcon:null,mode:c?"multiple":b,options:_,value:i,getPopupContainer:()=>document.body,onOpenChange:m,onFocus:m,onBlur:u,onChange:p}):(0,e.jsx)("span",{className:n.$.cx("text_wrap w_100 border_box inline_flex align_center",!v&&"placeholder"),children:v||r.placeholder})})}),lr=n.$.memo(o=>{let{x:l,y:r,width:s,height:i,focus:t}=o;return(0,e.jsx)(v.Rectangle,{x:l,y:r,width:s,height:i,fill:"rgba(var(--color_text_rgb), 0.03)",stroke:t?"var(--color_text)":"none",strokeWidth:1})});var ls=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Timeline/index.module.css"),li={};li.styleTagTransform=ea(),li.setAttributes=er(),li.insert=eo().bind(null,"head"),li.domAPI=K(),li.insertStyleElement=ei(),U()(ls.Z,li);let lt=ls.Z&&ls.Z.locals?ls.Z.locals:void 0,la=n.$.memo(o=>{let{timeline_type:l,items:r,payload:s}=o;if(!s?.length)return null;let{payload:i}=s[0],{range:t}=i,[d,c]=t,m=(0,a.useMemo)(()=>{let e=[];return r.forEach(o=>{o.bind in i&&e.push({...o,count:i[o.bind]})}),e},[r,i]);return(0,e.jsxs)("div",{className:n.$.cx("flex flex_column",lt.tooltip),children:[(0,e.jsxs)("span",{className:"title",children:[(0,_.default)(d).format(em[l].start_format),"-",(0,_.default)(c).format(em[l].end_format)]}),(0,e.jsx)("div",{className:"status_items w_100 flex flex_column",children:m.map(o=>(0,e.jsxs)("div",{className:"status_item w_100 flex justify_between align_center",children:[(0,e.jsxs)("div",{className:"flex align_center",children:[(0,e.jsx)("span",{className:n.$.cx("dot",o.label),style:{backgroundColor:o.color in ln?ln[o.color]:o.color}}),(0,e.jsx)("span",{className:"label",children:o.label}),(0,e.jsx)("span",{className:"code",children:o.bind})]}),(0,e.jsx)("span",{className:"count",children:o.count})]},o.bind))})]})}),ln={light:"rgba(var(--color_text_rgb),0.06)",dark:"rgba(var(--color_text_rgb),0.6)",success:"rgba(var(--color_success_rgb),0.6)",warning:"rgba(var(--color_warning_rgb),0.6)",danger:"rgba(var(--color_danger_rgb),0.6)"},ld=n.$.memo(o=>{let{label_bind:l,items:r,timeline_type:i,timeline_items:t,timeline_focus:a,onTimelineFocus:d}=o;return(0,e.jsx)("div",{className:n.$.cx(lt._local),children:(0,e.jsx)(v.ResponsiveContainer,{width:"100%",height:60,children:(0,e.jsxs)(v.BarChart,{margin:{top:1,left:1,right:1,bottom:0},maxBarSize:30,barCategoryGap:2,data:t,onClick:d,children:[(0,e.jsx)(v.XAxis,{dataKey:l,tickFormatter:e=>(0,_.default)(e).format(em[i].duration_format),tickLine:!1,axisLine:!1,fontSize:10,tick:{fill:"var(--color_text_light)",dy:0}}),(0,e.jsx)(v.Tooltip,{wrapperStyle:{zIndex:1e3},cursor:{fill:"transparent",stroke:"var(--color_text)",strokeWidth:1},content:o=>(0,e.jsx)(la,{timeline_type:i,items:r,payload:o.payload})}),(0,e.jsx)(v.Bar,{dataKey:"",stackId:"a",background:o=>(0,e.jsx)(lr,{...(0,s.pick)(o,["x","y","width","height"]),focus:o.index===a})}),r.map(o=>(0,e.jsx)(v.Bar,{dataKey:o.bind,stackId:"a",fill:o.color in ln?ln[o.color]:o.color}))]})})})});var lc=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/TimelineControls/index.module.css"),lm={};lm.styleTagTransform=ea(),lm.setAttributes=er(),lm.insert=eo().bind(null,"head"),lm.domAPI=K(),lm.insertStyleElement=ei(),U()(lc.Z,lm);let lu=lc.Z&&lc.Z.locals?lc.Z.locals:void 0,lp=s=>{let{timeline_type:i,timeline_timestamp:t,timeline_querying:a,timeline_range:c,onChangeTimelineType:m,onChangeTimelineTimestamp:u,onResetTimeline:p}=s,h=(0,o.useMemoizedFn)(()=>u("prev")),b=(0,o.useMemoizedFn)(()=>u("next"));return(0,e.jsxs)("div",{className:n.$.cx("border_box flex align_center relative",lu._local),children:[(0,e.jsx)("div",{className:"btn_wrap flex justify_center align_center clickable",onClick:h,children:(0,e.jsx)(d.CaretLeft,{})}),(0,e.jsx)("div",{className:"type_wrap",children:(0,e.jsx)(l.Select,{suffixIcon:null,popupMatchSelectWidth:!1,variant:"borderless",value:i,options:eu,onChange:m})}),(0,e.jsx)("div",{className:"btn_wrap flex justify_center align_center clickable",onClick:b,children:(0,e.jsx)(d.CaretRight,{})}),c?(0,e.jsxs)("div",{className:"timestamp_wrap",children:[(0,_.default)(c[0]).format(em[i].start_format),"-",(0,_.default)(c[1]).format(em[i].end_format)]}):(0,e.jsx)("div",{className:"timestamp_wrap",children:(0,_.default)(t).format(em[i].duration_format)}),(0,e.jsx)("div",{className:"btn_wrap btn_reset flex justify_center align_center clickable",onClick:p,children:(0,e.jsx)(d.ArrowCounterClockwise,{size:14})}),a&&(0,e.jsx)("div",{className:"timeline_loading_wrap flex justify_center align_center absolute",children:(0,e.jsx)(r.LoadingCircle,{size:14})})]})};var l_=X("../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/index.module.css"),lh={};lh.styleTagTransform=ea(),lh.setAttributes=er(),lh.insert=eo().bind(null,"head"),lh.domAPI=K(),lh.insertStyleElement=ei(),U()(l_.Z,lh);let lb=l_.Z&&l_.Z.locals?l_.Z.locals:void 0;var lg=X("../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/components/Highlight/index.module.css"),lf={};lf.styleTagTransform=ea(),lf.setAttributes=er(),lf.insert=eo().bind(null,"head"),lf.domAPI=K(),lf.insertStyleElement=ei(),U()(lg.Z,lf);let lx=lg.Z&&lg.Z.locals?lg.Z.locals:void 0,lv=["","rgb(120, 119, 116)","rgb(159, 107, 83)","rgb(217, 115, 13)","rgb(203, 145, 47)","rgb(68, 131, 97)","rgb(51, 126, 169)","rgb(144, 101, 176)","rgb(193, 76, 138)","rgb(212, 76, 71)"],lj=["","rgb(248, 248, 247)","rgb(244, 238, 238)","rgb(251, 236, 221)","rgb(251, 243, 219)","rgb(237, 243, 236)","rgb(231, 243, 248)","rgb(248, 243, 252)","rgb(252, 241, 246)","rgb(253, 235, 236)"],ly=o=>{let{getColorActive:l,getbackgroundActive:r,onSelect:s}=o;return(0,e.jsxs)("div",{className:n.$.cx("flex flex_column",lx._local),children:[(0,e.jsx)("span",{className:"label",children:"Color"}),(0,e.jsx)("div",{className:"color_items color",children:lv.map(o=>(0,e.jsx)("span",{className:n.$.cx("border_box flex justify_center align_center clickable",o&&l((0,W.default)(o).hex())&&"active"),style:{"--color":o||"var(--color_text)","--border_color":o||"var(--color_text)"},onClick:()=>s("color",o?(0,W.default)(o).hex():""),children:"A"},o))}),(0,e.jsx)("span",{className:"label",children:"Background"}),(0,e.jsx)("div",{className:"color_items background",children:lj.map(o=>(0,e.jsx)("span",{className:n.$.cx("border_box clickable",o&&r((0,W.default)(o).hex())&&"active"),style:{"--color":o||"var(--color_bg)","--border_color":o?(0,W.default)(o).darken(.1).toString():"var(--color_border)"},onClick:()=>s("background",o?(0,W.default)(o).hex():"")},o))})]})};var lw=X("../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[1].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[1].use[2]!../../../../../../../node_modules/.pnpm/@rsbuild+core@1.3.18/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[1].use[3]!./src/components/Editor/components/TableActions/index.module.css"),lS={};lS.styleTagTransform=ea(),lS.setAttributes=er(),lS.insert=eo().bind(null,"head"),lS.domAPI=K(),lS.insertStyleElement=ei(),U()(lw.Z,lS);let lk=lw.Z&&lw.Z.locals?lw.Z.locals:void 0,lN=o=>{let{editor:l}=o,r=(0,a.useMemo)(()=>[{label:"Insert table",action:()=>l.commands.insertTable({rows:3,cols:3,withHeaderRow:!0})},{label:"Add column before",action:()=>l.commands.addColumnBefore()},{label:"Add column after",action:()=>l.commands.addColumnAfter()},{label:"Add row before",action:()=>l.commands.addRowBefore()},{label:"Add row after",action:()=>l.commands.addRowAfter()},{label:"divider"},{label:"Toggle header row",action:()=>l.commands.toggleHeaderRow()},{label:"Toggle header column",action:()=>l.commands.toggleHeaderColumn()},{label:"Toggle header cell",action:()=>l.commands.toggleHeaderCell()},{label:"Merge cells",action:()=>l.commands.mergeCells()},{label:"Split cells",action:()=>l.commands.splitCell()},{label:"divider"},{label:"Delete column",action:()=>l.commands.deleteColumn()},{label:"Delete row",action:()=>l.commands.deleteRow()},{label:"Delete table",action:()=>l.commands.deleteTable()},{label:"Fix table",action:()=>l.commands.fixTables()}],[l]);return(0,e.jsx)("div",{className:n.$.cx("flex flex_column",lk._local),children:(0,e.jsx)("div",{className:"action_items w_100 flex flex_column",children:r.map(({label:o,action:l},r)=>"divider"===o?(0,e.jsx)("span",{className:"divider"},r):(0,e.jsx)("div",{className:"action_item flex align_center clickable",onClick:l,children:o},r))})})},lC=e=>{let o=e.getAttributes("link").href,l=window.prompt("URL",o);if(null!==l){if(""===l)return void e.chain().focus().extendMarkRange("link").unsetLink().run();try{e.chain().focus().extendMarkRange("link").setLink({href:l}).run()}catch(e){alert(e?.message)}}},lT=e=>{let o=window.prompt("URL");o&&e.chain().focus().setImage({src:o}).run()},lA=r=>{let{editor:s}=r,i=(0,o.useMemoizedFn)(e=>s.isActive("textStyle",{color:e})),t=(0,o.useMemoizedFn)(e=>s.isActive("highlight",{color:e})),c=(e,o)=>{"color"===e?!o||i(o)?s.commands.unsetColor():s.commands.setColor(o):o?s.commands.toggleHighlight({color:o}):s.commands.unsetHighlight()},m=(0,a.useMemo)(()=>[{Icon:d.ArrowCounterClockwise,action:()=>s.commands.undo(),disabled:()=>!s.can().undo()},{Icon:d.ArrowClockwise,action:()=>s.commands.redo(),disabled:()=>!s.can().redo()},{render:()=>(0,e.jsx)("span",{className:"divider"},"divider_0")},{Icon:d.TextB,action:()=>s.commands.toggleBold(),active:()=>s.isActive("bold")},{Icon:d.TextItalic,action:()=>s.commands.toggleItalic(),active:()=>s.isActive("italic")},{Icon:d.TextUnderline,action:()=>s.commands.toggleUnderline(),active:()=>s.isActive("underline")},{Icon:d.TextStrikethrough,action:()=>s.commands.toggleStrike(),active:()=>s.isActive("strike")},{Icon:d.Link,action:()=>lC(s),active:()=>s.isActive("link")},{render:()=>(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottom",destroyOnHidden:!0,content:(0,e.jsx)(ly,{getColorActive:i,getbackgroundActive:t,onSelect:c}),children:(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:n.$.cx("btn_wrap flex justify_center align_center clickable",(s.isActive("textStyle")||s.isActive("highlight"))&&"active"),children:(0,e.jsx)(d.PaintBrush,{weight:s.isActive("highlight")?"bold":"regular"})})})},"highlight")},{render:()=>(0,e.jsx)("span",{className:"divider"},"divider_1")},{Icon:d.Code,action:()=>s.commands.toggleCodeBlock(),active:()=>s.isActive("codeBlock")},{Icon:d.ListBullets,action:()=>s.commands.toggleBulletList(),active:()=>s.isActive("bulletList")},{Icon:d.ListNumbers,action:()=>s.commands.toggleOrderedList(),active:()=>s.isActive("orderedList")},{Icon:d.ListChecks,action:()=>s.commands.toggleTaskList(),active:()=>s.isActive("taskList")},{render:()=>(0,e.jsx)(l.Popover,{trigger:["click"],placement:"bottom",destroyOnHidden:!0,content:(0,e.jsx)(lN,{editor:s}),children:(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:n.$.cx("btn_wrap flex justify_center align_center clickable",s.isActive("table")&&"active"),children:(0,e.jsx)(d.Table,{weight:s.isActive("table")?"bold":"regular"})})})},"table")},{Icon:d.Image,action:()=>lT(s)},{Icon:d.RowsPlusBottom,action:()=>s.chain().insertContent("<p></p>").focus("end").run()}],[s]);return(0,e.jsx)("div",{className:n.$.cx("border_box",lb.Toolbar),children:(0,e.jsx)("div",{className:"toolbar_wrap w_100 border_box  flex justify_between align_center",children:m.map(({Icon:o,action:l,active:r,disabled:s,render:i},t)=>i?i():(0,e.jsx)("button",{className:n.$.cx("btn_wrap flex justify_center align_center clickable",r?.()&&"active"),type:"button",disabled:s?.(),onClick:l,children:(0,e.jsx)(o,{weight:r?.()?"bold":"regular"})},t))})})},l$=(0,k.createLowlight)();l$.register("html",S.default),l$.register("css",j.default),l$.register("js",y.default),l$.register("ts",w.default);let lH=n.$.memo(o=>{let{value:l,readonly:r,max_height:s,onChange:i}=o,t=(0,Q.useEditor)({editable:!r,immediatelyRender:!1,extensions:[L.default.configure({codeBlock:!1}),H.default.configure({placeholder:"Write description..."}),$.default.configure({openOnClick:!1,defaultProtocol:"https"}),F.default.configure({nested:!0}),z.default.configure({resizable:!0}),N.default.configure({lowlight:l$,defaultLanguage:"ts"}),T.default.configure({multicolor:!0}),P.default,A.default,M.default,D.default,Z.default,E.default,R.default,I.default,C.Color],content:l?JSON.parse(l):"",onUpdate:({editor:e})=>{i(JSON.stringify(e.getJSON()))}});return t?(0,e.jsxs)("div",{className:n.$.cx("w_100 flex flex_column",lb._local),children:[(0,e.jsx)(lA,{editor:t}),(0,e.jsx)("div",{className:"editor_wrap w_100 border_box",style:{height:s,maxHeight:s,overflowY:"scroll"},children:(0,e.jsx)(Q.EditorContent,{editor:t})})]}):null});class lz{constructor(){this.antd=null,this.primary="id",this.props=null,this.config=null,this.filter_columns=[],this.table_columns=[],this.form_columns=[],this.editing_info=null,this.sort_columns=[],this.sort_field_options=[],this.sort_params=[],this.filter_relation="and",this.filter_params=[],this.stat_params=[],this.stat_items=[],this.group_params={fields:[],acc:[]},this.visible_columns=[],this.apply_view_name="",this.views=[],this.modal_type="view",this.modal_index=null,this.modal_visible=!1,this.modal_view_visible=!1,this.loading_init=!0,this.querying=!1,this.loading=!1,this.refreshing=!1,this.living=!1,this.timeline_type="hours",this.timeline_timestamp=(0,_.default)().valueOf(),this.timeline_focus=null,this.timeline_range=null,this.timeline_items=[],this.timeline_querying=!1,this.items=[],this.items_raw=[],this.pagination={page:1,pagesize:12,total:0},this.living_timer=null,this.disposers=[],(0,b.makeAutoObservable)(this,{antd:!1,primary:!1,props:!1,config:!1,items_raw:!1,living_timer:!1,disposers:!1},{autoBind:!0})}async init(e){let{props:o,antd:l}=e;this.loading_init=!0,this.antd=l,"config_url"in o?await this.getConfig(o.config_url):this.config=o,this.disposers=[(0,O.setStorageWhenChange)([{[`${this.config.name}:views`]:"views"}],this)];let r=this.config.primary,s=this.config.table.props?.pagesize;r&&(this.primary=r),s&&(this.pagination={...this.pagination,pagesize:s}),this.make(),this.getSortFieldOptions(),this.config.group&&this.makeGroupParams(),this.config.stat?.columns?.length&&this.makeStatParams(),await this.query(),this.loading_init=!1,this.on()}async getConfig(e){let[o,l]=await (0,h.default)((0,g.ofetch)(e));if(o)return this.antd.message.error(`\u{914D}\u{7F6E}\u{8BF7}\u{6C42}\u{51FA}\u{9519} ${o.message}`);this.config=l}async query(e,o){e||(this.querying=!0);let{api:l,params:r}=this.getAction(this.config.actions.query),[i,t]=await (0,h.default)((0,g.ofetch)(`${this.config.baseurl}${l}`,{method:"POST",body:{sort_params:this.sort_params,filter_relation:this.filter_relation,filter_params:this.filter_params.filter(e=>"value"in e),page:this.pagination.page,pagesize:this.pagination.pagesize,params:r}}));if(e||(this.querying=!1),i)return this.antd.message.error(`Query error: ${i?.message}`),!1;if("error"in t)return this.antd.message.error(`${t.error}: ${t.message}`),!1;let a=this.config.hooks?.afterQuery?this.config.hooks.afterQuery(t.data.items):t.data.items;this.items_raw=a,this.group_params.fields.length?this.items=this.makeGroupData(a,n.$.copy(this.group_params.fields),n.$.copy(this.group_params.acc)):this.items=a,this.pagination=(0,s.omit)(t.data,"items"),this.getStatItems(),o||this.queryTimeline()}async create(e){this.loading=!0;let{api:o,params:l}=this.getAction(this.config.actions.create),[r,s]=await (0,h.default)((0,g.ofetch)(`${this.config.baseurl}${o}`,{method:"POST",body:{...this.config.hooks?.beforeCreate?this.config.hooks.beforeCreate(e):e,params:l}}));return(this.loading=!1,this.modal_visible=!1,r)?(this.antd.message.error(`Create error: ${r.message}`),!1):"error"in s?(this.antd.message.error(`${s.error}: ${s.message}`),!1):void this.query()}async update(e,o){this.loading=!0;let{api:l,params:r}=this.getAction(this.config.actions.update),s=x.default.render(`${this.config.baseurl}${l}`,{[this.primary]:e}),[i,t]=await (0,h.default)((0,g.ofetch)(s,{method:"POST",body:{...this.config.hooks?.beforeUpdate?this.config.hooks.beforeUpdate(o):o,params:r}}));return(this.loading=!1,this.modal_visible=!1,i)?(this.antd.message.error(`Update error: ${i.message}`),!1):"error"in t?(this.antd.message.error(`${t.error}: ${t.message}`),!1):void this.query(!0)}async delete(e){let{api:o,params:l}=this.getAction(this.config.actions.delete),r=x.default.render(`${this.config.baseurl}${o}`,{[this.primary]:e}),[s,i]=await (0,h.default)((0,g.ofetch)(r,{method:"POST",body:{params:l}}));return s?(this.antd.message.error(`Delete error: ${s.message}`),!1):"error"in i?(this.antd.message.error(`${i.error}: ${i.message}`),!1):void this.query(!0)}async queryTimeline(){if(!this.config?.timeline)return;this.timeline_querying=!0;let[e,o]=await (0,h.default)((0,g.ofetch)(`${this.config.baseurl}${this.config.timeline.api}`,{method:"GET",query:{type:this.timeline_type,timestamp:this.timeline_timestamp}}));return(this.timeline_querying=!1,e)?(this.antd.message.error(`Query timeline error: ${e?.message}`),!1):"error"in o?(this.antd.message.error(`${o.error}: ${o.message}`),!1):void(this.timeline_items=o.data)}async onChange(e,o){let l=o._operation,r=-1===e;if(l)"delete"===l.key?(this.modal_index=e,this.antd.modal.confirm({title:this.config.table.delete_tips?.title||"Are you absolutely sure?",content:this.config.table.delete_tips?.content||"This action cannot be undone. This will permanently delete this record.",centered:!0,closable:!0,icon:null,destroyOnClose:!0,getContainer:()=>document.body,onOk:async()=>{let o=this.items[e];if(this.items.splice(e,1),void 0===await this.delete(o[this.primary])){this.modal_index=-2;return}this.items.splice(e,0,o)},onCancel:()=>{this.modal_index=-2}})):(this.modal_type=l.key,this.modal_index=e,this.modal_visible=!0);else{let l=r?this.modal_index:e,s=this.items[l];if(this.items[l]={...s,...o},!Object.keys(o).length||void 0===await this.update(s[this.primary],o)){r&&(this.modal_visible=!1,this.modal_index=-2);return}this.items[l]=s}}async onRefresh(){this.refreshing=!0,await this.query(!0),this.refreshing=!1}onLive(){this.living?(this.living=!1,this.living_timer&&clearInterval(this.living_timer)):(this.living=!0,this.living_timer=setInterval(()=>{this.updateTimelineTimestamp(),this.query(!0)},1e3*this.config.live))}make(){if(this.filter_columns=this.config.filter?.columns.map(e=>{let o=this.config.fields.filter?.[e.name]||this.config.fields.common[e.name];return{...e,...o}})||[],this.table_columns=this.config.table.columns.map(e=>{let o=this.config.fields.table?.[e.name]||this.config.fields.common[e.name],l={...e,...o};return e.sort&&this.sort_columns.push(l),this.visible_columns.push({name:l.name,id:l.bind,visible:!0}),l}),!this.config.form||this.config.form?.use_table_columns){let e=(this.config.form?(0,s.uniqBy)([...this.config.table.columns,...this.config.form?.columns||[]],"name").filter(e=>!(this.config.form?.exclude_table_columns||[]).includes(e.name)):this.config.table.columns).map(e=>{let o=this.config.fields.form?.[e.name]||this.config.fields.common[e.name]||this.config.fields.table?.[e.name];return"_operation"===o.bind?null:{...e,...o}}).filter(e=>null!==e);this.form_columns=(0,s.uniqBy)(e,"name")}else this.form_columns=this.config.form?.columns?.map(e=>{let o=this.config.fields.form?.[e.name]||this.config.fields.common[e.name];return{...e,...o}})||[]}makeStatParams(){let e=this.config.stat?.columns;e&&e.length&&(e.forEach(e=>{let o=this.visible_columns.find(o=>o.name===e.name);o&&this.stat_params.push({field:o.id,type:e.type})}),this.stat_params=n.$.copy(this.stat_params))}makeGroupParams(){let{order:e,acc:o}=this.config.group;if(!e)return;let l=e.replace(/\s+/g,"").split(">"),r=[],s={fields:[],acc:[]};this.visible_columns.forEach(e=>{l.includes(e.name)&&s.fields.push({label:e.name,value:e.id}),o&&o.includes(e.name)&&s.acc.push({label:e.name,value:e.id}),l.slice(1).includes(e.name)||r.push(e)}),this.visible_columns=n.$.copy(r),this.group_params=n.$.copy(s)}makeGroupVisible(){let e=n.$.copy(this.group_params.fields),o=[],l=e.slice(1);this.table_columns.forEach(e=>{l.find(o=>o.label===e.name)||o.push({name:e.name,id:e.bind,visible:!0})}),this.visible_columns=n.$.copy(o)}makeGroupData(e,o,l,r=[],i=0,t){if(i===o.length)return r;let a=o[i],d=(0,s.groupBy)(e,a.value),c="number"==typeof this.items_raw[0]?.[a.value];return i+=1,Object.keys(d).forEach(e=>{let s=d[e],m=(t?`${t}/`:"")+`${a.value}:${a.label}:${e}`;c&&(e=parseFloat(e),(this.filter_columns.find(e=>e.name===a.label)?.datatype==="date"||(0,n.isMillisecondTimestamp)(e))&&(e=(0,_.default)(e).format("YYYY-MM-DD")));let u=this.visible_columns.reduce((r,t)=>(t.id===a.value||(l.find(e=>e.label===t.name)?r[t.id]=s.reduce((e,o)=>{let l=new q.Decimal(e),r=new q.Decimal(o[t.id]);return e=l.plus(r).toNumber()},0):r[t.id]=null,r.__group_field__=a.value,r.__group_name__=a.label,r.__group_value__=e,r.__group_id__=m,r.__group_visible_self__=!1,r.__group_visible_children__=!1,1===i&&(r.__group_top__=!0),i>1&&(r.__group_replace__={name:this.group_params.fields[0].label,value:e}),i<o.length&&(r.__group_toggle__=!0)),r),{});r.push({[a.value]:e,__group_level__:i-1,...u}),i<o.length&&this.makeGroupData(s,o,l,r,i,m),i===o.length&&s.forEach(e=>{r.push({...e,__group_field__:a.value,__group_name__:this.group_params.fields[0].label,__group_id__:m+"/"+e.id,__group_visible_children__:!1,__group_level__:i,__group_bottom__:!0,__group_replace__:{name:this.group_params.fields[0].label,value:""}})})}),r}getSortFieldOptions(e){let o=[],l=[],r=e||this.sort_params;this.sort_columns.forEach(e=>{let s={label:e.name,value:e.bind};r.find(o=>o.field===e.bind)?l.push({...s,disabled:!0}):o.push(s)});let s=[...o,...l];if(e)return s;this.sort_field_options=s}getStatItems(){if(!this.stat_params.length||!this.items_raw.length)return this.stat_items=[];let e=n.$.copy(this.items_raw),o=e.length,l=this.stat_params.reduce((e,o)=>(e[`${o.field}:${o.type}`]={...o,value:0},e),{});for(let r=0;r<e.length;r++){let s=e[r];Object.keys(l).forEach(e=>{let i=l[e],{field:t,type:a}=i,n=new q.Decimal(i.value),d=new q.Decimal(s[t]),c=d.toNumber();switch(a){case"SUM":i.value=n.plus(d).toNumber();break;case"AVG":if(i.value=n.plus(d).toNumber(),r===o-1){let e=new q.Decimal(i.value);i.value=new q.Decimal(e.div(new q.Decimal(o)).toFixed(3)).toNumber()}break;case"COUNT":r===o-1&&(i.value=o);break;case"MIN":(0===r||c<i.value)&&(i.value=c);break;case"MAX":c>i.value&&(i.value=c)}})}let r=[];Object.keys(l).forEach(e=>{let{field:o,type:s,value:i}=l[e];r.push({__stat_field__:o,__stat_type__:s,__stat_value__:i})});let i=(0,s.groupBy)(r,"__stat_type__");this.stat_items=Object.keys(i).reduce((e,o)=>{let l=i[o].reduce((e,l)=>(e.__stat_type__=o,e[l.__stat_field__]=l.__stat_value__,e),{});return e.push(l),e},[])}getGroupFieldOptions(e){let o=[],l=[];return this.table_columns.forEach(r=>{let s={label:r.name,value:r.bind};e.find(e=>e.value===r.bind)||"_operation"===r.bind?l.push({...s,disabled:!0}):o.push(s)}),[...o,...l]}onSort(e){let o=this.sort_params.findIndex(o=>o.field===e);-1===o?this.sort_params.push({field:e,order:"asc"}):"asc"===this.sort_params[o].order?this.sort_params[o].order="desc":this.sort_params.splice(o,1),this.sort_params=n.$.copy(this.sort_params),this.clearApplyView(),this.query()}onChangeSort(e){this.sort_params=e,this.getSortFieldOptions(),this.clearApplyView(),this.query()}onChangeFilter(e){let{filter_relation:o,filter_params:l,ignore_query:r}=e;o&&(this.filter_relation=o),l&&(this.filter_params=l);let s=this.filter_params.filter(e=>e.value);this.clearApplyView(),(!l?.length||s.length)&&(r||this.query())}onChangeStat(e){this.stat_params=e,this.getStatItems()}onChangeGroup(e,o){this.group_params=e,o||this.clearApplyView(),this.makeGroupVisible(),this.group_params.fields.length?this.items=this.makeGroupData(this.items_raw,n.$.copy(this.group_params.fields),n.$.copy(this.group_params.acc)):this.items=this.items_raw}onChangeTimelineType(e){this.onResetTimeline(),this.timeline_type=e,this.timeline_timestamp=(0,_.default)().valueOf(),this.queryTimeline()}onChangeTimelineTimestamp(e){let{span_value:o,span_unit:l}=em[this.timeline_type];this.timeline_timestamp=(0,_.default)(this.timeline_timestamp)["prev"===e?"subtract":"add"](o,l).valueOf(),this.queryTimeline()}onTimelineFocus(e){let o=e.activeTooltipIndex;if(void 0===o)return;if(null!==this.timeline_focus)return this.resetTimelineFocus();this.timeline_focus=o,this.timeline_range=this.timeline_items[o].range;let l=this.filter_params.findIndex(e=>e.field===this.config.timeline.control_bind),r={field:this.config.timeline.control_bind,expression:"is between",value:this.timeline_range};-1!==l?this.filter_params[l]=r:this.filter_params.push(r),this.filter_params=n.$.copy(this.filter_params),this.living&&this.onLive(),this.query(!1,!0)}onResetTimeline(){this.timeline_type="hours",this.timeline_timestamp=(0,_.default)().valueOf(),this.resetTimelineFocus()}resetTimelineFocus(){this.timeline_focus=null,this.timeline_range?(this.timeline_range=null,this.filter_params=n.$.copy(this.filter_params.filter(e=>e.field!==this.config.timeline.control_bind)),this.query(!1,!0)):this.queryTimeline()}onAddView(){this.views.unshift({name:"Table view "+(0,B.nanoid)(3),sort_params:this.sort_params,filter_relation:this.filter_relation,filter_params:this.filter_params,stat_params:this.stat_params,group_params:this.group_params,visible_columns:this.visible_columns}),this.views=n.$.copy(this.views)}onApplyView(e){this.apply_view_name=e.name,this.visible_columns=e.visible_columns,this.modal_view_visible=!1,(0,c.deepEqual)(n.$.copy(this.group_params),e.group_params)||(this.group_params=e.group_params,this.onChangeGroup(e.group_params,!0)),(0,c.deepEqual)({sort_params:n.$.copy(this.sort_params),filter_relation:n.$.copy(this.filter_relation),filter_params:n.$.copy(this.filter_params)},(0,s.pick)(e,["sort_params","filter_relation","filter_params"]))||(this.sort_params=e.sort_params,this.filter_relation=e.filter_relation,this.filter_params=e.filter_params,this.query()),(0,c.deepEqual)(n.$.copy(this.stat_params),e.stat_params)||(this.stat_params=e.stat_params,this.getStatItems())}onSubmit(e){switch(this.modal_type){case"add":this.create(e);break;case"edit":let o=this.items[this.modal_index],l={};Object.keys(e).forEach(r=>{(0,c.deepEqual)(o[r],e[r])||(l[r]=e[r])}),this.onChange(-1,l)}}onChangePagination(e,o){this.pagination={...this.pagination,page:e,pagesize:o},this.query()}clearApplyView(){this.apply_view_name=""}onVisibilityChange(){"visible"===document.visibilityState&&(this.updateTimelineTimestamp(),this.onRefresh())}updateTimelineTimestamp(){this.config?.timeline&&(this.timeline_timestamp=(0,_.default)().valueOf())}getAction(e){return"string"==typeof e?{api:e,params:null}:e}on(){this.config?.refresh?.on_show&&document.addEventListener("visibilitychange",this.onVisibilityChange)}off(){this.config?.refresh?.on_show&&document.removeEventListener("visibilitychange",this.onVisibilityChange),this.disposers.map(e=>e()),this.disposers=[]}}let{useApp:lZ}=l.App,lM=n.$.memo((0,t.observer)(t=>{let[c]=(0,a.useState)(()=>new lz),m=lZ(),u=n.$.copy(c.filter_columns),p=n.$.copy(c.visible_columns);(0,a.useLayoutEffect)(()=>(c.init({props:t,antd:m}),()=>c.off()),[t,m]);let _={sort_field_options:n.$.copy(c.sort_field_options),sort_params:n.$.copy(c.sort_params),onChangeSort:c.onChangeSort},h={filter_columns:u,filter_relation:c.filter_relation,filter_params:n.$.copy(c.filter_params),onChangeFilter:(0,o.useMemoizedFn)((0,s.debounce)(c.onChangeFilter,300))},b={visible_columns:p,stat_params:n.$.copy(c.stat_params),onChangeStat:c.onChangeStat},g={group_params:n.$.copy(c.group_params),getGroupFieldOptions:c.getGroupFieldOptions,onChangeGroup:c.onChangeGroup},f={visible_columns:p,onChangeVisibleColumns:(0,o.useMemoizedFn)(e=>{c.visible_columns=e,c.clearApplyView()})},x={label_bind:c.config?.timeline?.label_bind,items:n.$.copy(c.config?.timeline?.items)||[],timeline_type:c.timeline_type,timeline_items:n.$.copy(c.timeline_items),timeline_focus:c.timeline_focus,onTimelineFocus:c.onTimelineFocus},v={timeline_type:c.timeline_type,timeline_timestamp:c.timeline_timestamp,timeline_querying:c.timeline_querying,timeline_range:c.timeline_range,onChangeTimelineType:c.onChangeTimelineType,onChangeTimelineTimestamp:c.onChangeTimelineTimestamp,onResetTimeline:c.onResetTimeline},j={primary:c.primary,table_columns:n.$.copy(c.visible_columns.map(e=>{let o=c.table_columns.find(o=>o.name===e.name);return e.visible?o:null}).filter(e=>null!==e)),data:n.$.copy(c.items.concat(c.stat_items)),sort_params:n.$.copy(c.sort_params),editing_info:n.$.copy(c.editing_info),modal_index:c.modal_index,table_props:n.$.copy(c.config?.table?.props),onSort:c.onSort,onChange:c.onChange,onRowClick:(0,o.useMemoizedFn)(e=>{c.modal_type,c.modal_index=e,c.modal_visible=!0}),setEditingInfo:(0,o.useMemoizedFn)(e=>c.editing_info=e),setItems:(0,o.useMemoizedFn)(e=>c.items=e)},y={pagination:n.$.copy(c.pagination),onChangePagination:c.onChangePagination},w={form_columns:n.$.copy(c.form_columns),modal_type:c.modal_type,item:n.$.copy(null!==c.modal_index&&c.modal_index>=0?c.items.at(c.modal_index):void 0),loading:c.loading,onSubmit:c.onSubmit,onClose:(0,o.useMemoizedFn)(()=>{c.modal_visible=!1,c.modal_index=-2})},S={hide:{stat:c.config?.stat?.hide,group:c.config?.group?.hide},filter_columns:u,visible_columns:p,views:n.$.copy(c.views),getSortFieldOptions:c.getSortFieldOptions,getGroupFieldOptions:c.getGroupFieldOptions,onApplyView:c.onApplyView,onChangeViews:(0,o.useMemoizedFn)(e=>c.views=e)},k=(0,o.useMemoizedFn)(()=>c.modal_view_visible=!c.modal_view_visible),N=(0,o.useMemoizedFn)(()=>{c.modal_index,c.modal_type="add",c.modal_visible=!0});return(0,e.jsx)(oa,{value:{base_url:c.config?.baseurl},children:(0,e.jsxs)("div",{className:n.$.cx(ec._local),children:[(0,e.jsxs)("div",{className:n.$.cx("header_wrap w_100 flex flex_wrap justify_between",ec.header_wrap),children:[c.config&&(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsxs)("button",{className:"header_btn_wrap border_box flex align_center clickable mr_8",onClick:k,children:[(0,e.jsx)(d.Eyes,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"View"}),c.apply_view_name&&(0,e.jsx)("span",{className:"counts flex align_center",children:c.apply_view_name})]}),c.sort_columns.length>0&&(0,e.jsx)(eN,{..._}),c.filter_columns.length>0&&(0,e.jsx)(oM,{...h}),!c.config?.stat?.hide&&(0,e.jsx)(o6,{...b}),!c.config?.group?.hide&&(0,e.jsx)(o1,{...g}),c.config?.timeline&&(0,e.jsx)(lp,{...v})]}),(0,e.jsxs)("div",{className:"flex",children:[c.config?.refresh&&(0,e.jsx)("button",{className:n.$.cx("header_btn_wrap square border_box flex justify_center align_center clickable mr_8",c.refreshing&&"refreshing"),onClick:c.onRefresh,children:(0,e.jsx)(i.RefreshCw,{className:"icon",size:"0.921em",strokeWidth:1.5})}),c.config?.live&&(0,e.jsxs)("button",{className:n.$.cx("header_btn_wrap border_box flex align_center clickable mr_8",c.living&&"living"),onClick:c.onLive,children:[c.living?(0,e.jsx)(d.PauseCircle,{className:"icon"}):(0,e.jsx)(d.PlayCircle,{className:"icon"}),(0,e.jsx)("span",{className:"label",children:"Live"})]}),(0,e.jsx)(oF,{...f}),c.config?.actions?.create&&(0,e.jsxs)(l.Button,{className:"flex justify_center align_center clickable ml_8",type:"primary",onClick:N,children:[(0,e.jsx)(d.Plus,{className:"icon",weight:"bold"}),(0,e.jsx)("span",{children:"Create"})]})]})]}),c.config?.timeline&&(0,e.jsx)(ld,{...x}),(0,e.jsxs)("div",{className:"body_wrap w_100 flex flex_column relative",children:[!c.loading_init&&c.querying&&(0,e.jsx)("div",{className:"querying_wrap w_100 h_100 flex justify_center align_center absolute",children:(0,e.jsx)(r.LoadingCircle,{})}),!c.loading_init&&c.config?(0,e.jsxs)(a.Fragment,{children:[(0,e.jsx)(oL,{...j}),(0,e.jsx)(oW,{...y})]}):(0,e.jsx)("div",{className:"loading_wrap w_100 flex justify_center align_center",children:(0,e.jsx)(r.LoadingCircle,{})})]}),(0,e.jsx)(r.Drawer,{className:ec.Drawer,open:c.modal_visible||c.modal_view_visible,title:c.modal_view_visible?"Table views":"add"===c.modal_type?"Create":w.item?.[c.primary],width:c.modal_view_visible?"min(90vw,660px)":"min(100vw,480px)",placement:c.modal_view_visible?"left":"right",maskClosable:"view"===c.modal_type||c.modal_view_visible,disablePadding:c.modal_visible,onCancel:c.modal_view_visible?k:w.onClose,header_actions:c.modal_view_visible&&(0,e.jsxs)("button",{className:"btn_add_view flex justify_center align_center absolute clickable",onClick:c.onAddView,children:[(0,e.jsx)(d.Plus,{className:"icon",weight:"bold"}),(0,e.jsx)("span",{children:"Add"})]}),children:c.modal_view_visible?(0,e.jsx)(o9,{...S}):(0,e.jsx)(oO,{...w})})]})})}));export{lM as default};